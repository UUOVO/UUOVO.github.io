<!DOCTYPE html>
<html lang="zh-Hans,en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="x5-fullscreen" content="true">
<meta name="full-screen" content="yes">
<meta name="theme-color" content="#317EFB" />
<meta content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=0" name="viewport">
<meta name="description" content=".en1 {         color: green;         font-weight: 600;     }     .en {     color: #3D82AC;     font-weight:600;   }   .desc {         color: #CD853F;         font-weight: 600;         font-size:1">
<meta property="og:type" content="article">
<meta property="og:title" content="Solid">
<meta property="og:url" content="http://example.com/en/2025/03/19/Solid/%E5%88%9D%E8%AF%86/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content=".en1 {         color: green;         font-weight: 600;     }     .en {     color: #3D82AC;     font-weight:600;   }   .desc {         color: #CD853F;         font-weight: 600;         font-size:1">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-03-19T02:06:58.733Z">
<meta property="article:modified_time" content="2025-03-26T02:25:01.365Z">
<meta property="article:author" content="UUOVO">
<meta property="article:tag" content="Solid">
<meta name="twitter:card" content="summary">

    <meta name="keywords" content="SolidJS">


<title >Solid</title>

<!-- Favicon -->

    <link href='/img/sitelogo16.svg?v=2.2.3' rel='icon' type='image/png' sizes='16x16' ></link>


    <link href='/img/sitelogo32.svg?v=2.2.3' rel='icon' type='image/png' sizes='32x32' ></link>


    <link href='/apple-touch-icon.png?v=2.2.3' rel='apple-touch-icon' sizes='180x180' ></link>


    <link href='/site.webmanifest' rel='manifest' ></link>


<!-- Plugin -->




    
<link rel="stylesheet" href="/css/plugins/bootstrap.row.css">

    
<link rel="stylesheet" href="https://unpkg.com/@fancyapps/ui@4.0/dist/fancybox.css">

    
<link rel="stylesheet" href="https://unpkg.com/swiper@4.5.1/dist/css/swiper.min.css">

    




<!-- Icon -->

    
<link rel="stylesheet" href="/css/plugins/font-awesome.min.css">




<!-- Variable -->
<script>window.ASYNC_CONFIG = {"hostname":"example.com","author":"UUOVO","root":"/","typed_text":["Web Developer"],"theme_version":"2.2.3","theme":{"switch":true,"default":"style-light"},"favicon":{"logo":"/img/sitelogo32.svg","icon16":"/img/sitelogo16.svg","icon32":"/img/sitelogo32.svg","apple_touch_icon":"apple-touch-icon.png","webmanifest":"/site.webmanifest","visibilitychange":true,"hidden":"failure.ico","show_text":"(/≧▽≦/)咦！又好了！","hide_text":"(●—●)喔哟，崩溃啦！"},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}.","hits":"${hits} results found","hits_time":"${hits} results found in ${time} ms","author":"Post author: ","copyright_link":"Post link: ","copyright_license_title":"Copyright Notice: ","copyright_license_content":"All articles in this blog are licensed under undefined unless otherwise stated.","copy_success":"Copied","copy_failure":"Copy failed","open_read_mode":"Enter reading mode","exit_read_mode":"Exit reading mode","notice_outdate_message":"It has been undefined days since the last update, the content of the article may be outdated.","sticky":"TOP","just":"Just","min":"minutes ago","hour":"hours ago","day":"days ago","month":"months ago"},"swup":false,"plugin":{"flickr_justified_gallery":"https://unpkg.com/flickr-justified-gallery@latest/dist/fjGallery.min.js"},"icons":{"sun":"far fa-sun","moon":"far fa-moon","play":"fas fa-play","email":"far fa-envelope","next":"fas fa-arrow-right","calendar":"far fa-calendar-alt","clock":"far fa-clock","user":"far fa-user","back_top":"fas fa-arrow-up","close":"fas fa-times","search":"fas fa-search","reward":"fas fa-hand-holding-usd","toc_tag":"fas fa-th-list","read":"fas fa-book-reader","arrows":"fas fa-arrows-alt-h","double_arrows":"fas fa-angle-double-down","copy":"fas fa-copy"},"icontype":"font","highlight":{"plugin":"highlighjs","theme":true,"copy":true,"lang":true,"title":"mac","height_limit":false},"toc":{"post_title":true},"live_time":{"start_time":"10/30/2024 17:00:00","prefix":"The blog has been lovely to run undefined day"},"danmu":{"enable":true,"el":".trm-banner"},"covers":["/img/cover/cover-1.jpg","/img/cover/cover-2.jpg","/img/cover/cover-3.jpg","/img/cover/cover-4.jpg","/img/cover/cover-5.jpg","/img/cover/cover-6.jpg","/img/cover/cover-7.jpg","/img/cover/cover-8.png","/img/cover/cover-9.png","/img/cover/cover-10.jpg","/img/cover/cover-11.jpg"],"search":{"enable":true,"type":"local","href":"https://www.google.com/search?q=site:","domain":null,"path":"search.xml"}};</script>
<script id="async-page-config">window.PAGE_CONFIG = {"isPost":true,"isHome":false,"postUpdate":"2025-03-26 10:25:01"};</script>

<!-- Theme mode css -->
<link data-swup-theme rel="stylesheet" href="/css/index.css?v=2.2.3" id="trm-switch-style">
<script>
    let defaultMode = ASYNC_CONFIG.theme.default !=='auto' ?  ASYNC_CONFIG.theme.default : (window.matchMedia("(prefers-color-scheme: light)").matches ? 'style-light' : 'style-dark')
    let catchMode = localStorage.getItem('theme-mode') || defaultMode;
    let type = catchMode === 'style-dark' ? 'add' : 'remove';
    document.documentElement.classList[type]('dark')
</script>

<!-- CDN -->


    
    



<!-- Site Analytics -->

 
<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head>

<body>

  <!-- app wrapper -->
  <div class="trm-app-frame">

    <!-- page preloader -->
    <div class="trm-preloader">
    <div class="trm-holder">
        <div class="preloader">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
</div>
    <!-- page preloader end -->

    <!-- change mode preloader -->
    <div class="trm-mode-swich-animation-frame">
    <div class="trm-mode-swich-animation">
        <i class="i-sun"><i class="iconfont far fa-sun"></i></i>
        <div class="trm-horizon"></div>
        <i class="i-moon"><i class="iconfont far fa-moon"></i></i>
    </div>
</div>
    <!-- change mode preloader end -->

      <!-- scroll container -->
      <div id="trm-dynamic-content" class="trm-swup-animation">
        <div id="trm-scroll-container" class="trm-scroll-container" style="opacity: 0">
            <!-- top bar -->
            <header class="trm-top-bar">
	<div class="container">
		<div class="trm-left-side">
			<!-- logo -->
<a href="/" class="trm-logo-frame trm-anima-link">
    
        <img alt="logo" src="/img/sitelogo32.svg">
    
    
        <div class="trm-logo-text">
            UU<span>OVO</span>
        </div>
    
</a>
<!-- logo end -->
		</div>
		<div class="trm-right-side">
			<!-- menu -->
<div class="trm-menu">
    <nav>
        <ul>
            
            <li class="menu-item-has-children ">
                <a  href="/" target="">
                    首页
                </a>
                
            </li>
            
            <li class="menu-item-has-children ">
                <a  href="/archives/" target="">
                    归档
                </a>
                
                <ul>
                    
                    <li>
                        <a  href="/tags/" target="">
                            标签
                        </a>
                    </li>
                    
                </ul>
                
            </li>
            
            <li class="menu-item-has-children ">
                <a  href="/categories/" target="">
                    分类
                </a>
                
                <ul>
                    
                    <li>
                        <a  href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" target="">
                            微信小程序
                        </a>
                    </li>
                    
                    <li>
                        <a  href="/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E5%B7%A5%E5%85%B7/" target="">
                            前端工程化工具
                        </a>
                    </li>
                    
                    <li>
                        <a  href="/categories/React/" target="">
                            React
                        </a>
                    </li>
                    
                    <li>
                        <a  href="/categories/VUE/" target="">
                            VUE
                        </a>
                    </li>
                    
                    <li>
                        <a  href="/categories/TypeScript/" target="">
                            TypeScript
                        </a>
                    </li>
                    
                    <li>
                        <a  href="/categories/JavaScript/" target="">
                            JavaScript
                        </a>
                    </li>
                    
                    <li>
                        <a  href="/categories/CSS-HTML/" target="">
                            CSS&HTML
                        </a>
                    </li>
                    
                    <li>
                        <a  href="/categories/%E7%BD%91%E7%BB%9C%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" target="">
                            网络与数据结构
                        </a>
                    </li>
                    
                    <li>
                        <a  href="/categories/uniapp/" target="">
                            uniapp
                        </a>
                    </li>
                    
                    <li>
                        <a  href="/categories/ThreeJS/" target="">
                            ThreeJS
                        </a>
                    </li>
                    
                    <li>
                        <a  href="/categories/Node/" target="">
                            Node
                        </a>
                    </li>
                    
                    <li>
                        <a  href="/categories/JQuery/" target="">
                            JQuery
                        </a>
                    </li>
                    
                    <li>
                        <a  href="/categories/ES6/" target="">
                            ES6
                        </a>
                    </li>
                    
                    <li>
                        <a  href="/categories/AJAX/" target="">
                            AJAX
                        </a>
                    </li>
                    
                    <li>
                        <a  href="/categories/%E5%8F%AF%E8%A7%86%E5%8C%96/" target="">
                            可视化
                        </a>
                    </li>
                    
                </ul>
                
            </li>
            
            <li class="menu-item-has-children ">
                <a  href="/gallery/" target="">
                    相册
                </a>
                
                <ul>
                    
                    <li>
                        <a  href="/gallery/wallpaper/" target="">
                            相册详情页
                        </a>
                    </li>
                    
                </ul>
                
            </li>
            
            <li class="menu-item-has-children ">
                <a  href="/about/" target="">
                    关于
                </a>
                
                <ul>
                    
                    <li>
                        <a  href="/links/" target="">
                            友链
                        </a>
                    </li>
                    
                </ul>
                
            </li>
            
        </ul>
    </nav>
</div>
<!-- menu end -->
			
    <!-- mode switcher place -->
    <div class="trm-mode-switcher-place">
        <div class="trm-mode-switcher">
            <i class="iconfont far fa-sun"></i>
            <input class="tgl tgl-light" id="trm-swich" type="checkbox">
            <label class="trm-swich" for="trm-swich"></label>
            <i class="iconfont far fa-moon"></i>
        </div>
    </div>
    <!-- mode switcher place end -->

			
    
    <div id="trm-search-btn" class="trm-search-btn">
        <i class="iconfont fas fa-search"></i>
    </div>
     

		</div>
		<div class="trm-menu-btn">
			<span></span>
		</div>
	</div>
</header>
            <!-- top bar end -->

            <!-- body -->
            
<div class="trm-content-start">
    <!-- banner -->
    <div class="trm-banner">
    
    <!-- banner slideshow cover-->
    <div class="swiper-container trm-slideshow">
        <div class="swiper-wrapper">
            
            <div class="swiper-slide">
                <img style="object-position:top;object-fit:cover" src="https://pic.netbian.com/uploads/allimg/230124/002504-167449110430d8.jpg" alt="banner" class="trm-banner-cover top" data-swiper-parallax-y="-200" data-swiper-parallax-scale="1.2">
            </div>
            
            <div class="swiper-slide">
                <img style="object-position:top;object-fit:cover" src="https://img.shetu66.com/2023/07/04/1688440566649486.png" alt="banner" class="trm-banner-cover top" data-swiper-parallax-y="-200" data-swiper-parallax-scale="1.2">
            </div>
            
            <div class="swiper-slide">
                <img style="object-position:top;object-fit:cover" src="https://img.shetu66.com/2023/07/04/1688453333865029.png" alt="banner" class="trm-banner-cover top" data-swiper-parallax-y="-200" data-swiper-parallax-scale="1.2">
            </div>
            
        </div>
    </div>
    <!-- banner slideshow cover end -->
    

    <!-- banner content -->
    <div class="trm-banner-content trm-overlay">
        <div class="container">
            <div class="row">
                
                <div class="col-lg-4"></div>
                
                <div class="col-lg-8">

                    <!-- banner title -->
                    <div class="trm-banner-text ">
                        <div class="trm-label trm-mb-20">
                            NEWS LETTER
                        </div>
                        <h1 class="trm-mb-30 trm-hsmb-font">
                            Solid
                        </h1>

                        
                            <ul class="trm-breadcrumbs trm-label">
                                <li>
                                    <a href="/" class="trm-anima-link">Home</a>
                                </li>
                                <li>
                                    <span>
                                        en
                                    </span>
                                </li>
                            </ul>
                        
                    </div>
                    <!-- banner title end -->

                    <!-- scroll hint -->
                    <span id="scroll-triger" class="trm-scroll-hint-frame">
                        <div class="trm-scroll-hint"></div>
                        <span class="trm-label">Scroll down</span>
                    </span>
                    <!-- scroll hint end -->

                </div>
            </div>
        </div>
    </div>
    <!-- banner content end -->
</div>
    <!-- banner end -->
    <div class="container">
        <div class="row">
            
                <div class="trm-page-sidebar col-lg-4 hidden-sm">
                    <!-- main card -->
                    <div class="trm-main-card-frame trm-sidebar">
    <div class="trm-main-card"> 
        <!-- card header -->
<div class="trm-mc-header">
    <div class="trm-avatar-frame trm-mb-20">
        <img alt="Avatar" class="trm-avatar" src="/img/avatar1.jpg">
    </div>
    <h5 class="trm-name trm-mb-15">
        UUOVO
    </h5>
    
        <div class="trm-label">
            I`m
            <span class="trm-typed-text">
                <!-- Words for theme.user.typedText -->
            </span>
        </div>
    
</div>
<!-- card header end -->
        <!-- sidebar social -->

<div class="trm-divider trm-mb-40 trm-mt-40"></div>
<div class="trm-social">
    
        <a href="https://github.com/UUOVO" title="Github" rel="nofollow" target="_blank">
            <i class="iconfont fab fa-github"></i>
        </a>
    
        <a href="https://gitee.com/ovouu" title="Gitee" rel="nofollow" target="_blank">
            <i class="iconfont fab fa-google"></i>
        </a>
    
</div>

<!-- sidebar social end -->
        <!-- info -->
<div class="trm-divider trm-mb-40 trm-mt-40"></div>
<ul class="trm-table trm-mb-20">
    
        <li>
            <div class="trm-label">
                Residence:
            </div>
            <div class="trm-label trm-label-light">
                Mars
            </div>
        </li>
    
        <li>
            <div class="trm-label">
                City:
            </div>
            <div class="trm-label trm-label-light">
                City
            </div>
        </li>
    
        <li>
            <div class="trm-label">
                Age:
            </div>
            <div class="trm-label trm-label-light">
                Age
            </div>
        </li>
    
</ul>
<!-- info end -->

        
    <div class="trm-divider trm-mb-40 trm-mt-40"></div>
    <!-- action button -->
    <div class="text-center">
        <a href="mailto:1370203877@qq.com" class="trm-btn">
            Contact Me
            <i class="iconfont far fa-envelope"></i>
        </a>
    </div>
    <!-- action button end -->

    </div>
</div>
                    <!-- main card end -->
                </div>
            
            <div class="trm-page-content col-lg-8">
                <div id="trm-content" class="trm-content">
                    <div class="trm-post-info row hidden-sm">
    <div class="col-sm-4">
        <div class="trm-card trm-label trm-label-light text-center">
            <i class="iconfont far fa-calendar-alt trm-icon"></i><br>
            03/19
        </div>
    </div>
    <div class="col-sm-4">
        <div class="trm-card trm-label trm-label-light text-center">
            <i class="iconfont far fa-clock trm-icon"></i><br>
            10:06
        </div>
    </div>
    <div class="col-sm-4">
        <div id="post-author" class="trm-card trm-label trm-label-light text-center">
            <i class="iconfont far fa-user trm-icon"></i><br>
            UUOVO
        </div>
    </div>
</div>
<div class="trm-card ">
    <article id="article-container" class="trm-publication">
    <style>
    .en1 {
        color: green;
        font-weight: 600;
    }
    .en {
    color: #3D82AC;
    font-weight:600;
  }
  .desc {
        color: #CD853F;
        font-weight: 600;
        font-size:14px;
    }
  .key {
    color: #483D8B;
    font-weight: 700;
  }
</style>

<h2 id="什么是-Solid？"><a href="#什么是-Solid？" class="headerlink" title="什么是 Solid？"></a>什么是 Solid？</h2><ul>
<li>一个 JavaScript 框架</li>
<li>局部更新，只更新改动的内容</li>
<li>当依赖的数据发生变化时更新</li>
<li>类似 react 语法</li>
</ul>
<h2 id="创建-Solid-应用程序"><a href="#创建-Solid-应用程序" class="headerlink" title="创建 Solid 应用程序"></a>创建 Solid 应用程序</h2><ul>
<li>前提： 安装 Node.js 或 Deno</li>
<li>创建：<ul>
<li>JS版：<span class="en">pnpm dlx degit solidjs&#x2F;templates&#x2F;js my-app</span></li>
<li>TS版：<span class="en">pnpm dlx degit solidjs&#x2F;templates&#x2F;ts my-app</span></li>
</ul>
</li>
<li>导航：<span class="en">cd my-app</span></li>
<li>安装：<span class="en">pnpm install</span></li>
<li>运行：<span class="en">pnpm run dev</span></li>
</ul>
<h2 id="反应性"><a href="#反应性" class="headerlink" title="反应性"></a>反应性</h2><ul>
<li>含义：系统<span class="en1">自动响应</span>数据或状态变化的能力，确保应用程序与底层数据<span class="en1">保持同步</span></li>
<li>示例：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">createSignal</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>) =&gt; <span class="title function_">setCount</span>(<span class="function">(<span class="params">prev</span>) =&gt;</span> prev + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>Count: &#123;count()&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span>&#123;&#x27; &#x27;&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;/* 仅单击按钮时调用increment改变count，不刷新整个组件 */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&#x27;button&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onClick</span>=<span class="string">&#123;increment&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span></span></span><br><span class="line"><span class="language-xml">        Increment</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>可以看到跟 react hook 的相似处<ul>
<li>createSignal() &#x3D;&#x3D;&gt; useState()</li>
<li>count() &#x3D;&#x3D;&gt; count</li>
</ul>
</li>
</ul>
<h2 id="反应原理"><a href="#反应原理" class="headerlink" title="反应原理"></a>反应原理</h2><h3 id="信号-Signals"><a href="#信号-Signals" class="headerlink" title="信号 Signals"></a>信号 Signals</h3><ul>
<li>反应式系统的核心元素，在数据管理和系统响应能力中发挥着重要作用。</li>
<li>由两个主要功能组成：<ul>
<li><span class="en">getter</span>：访问存储在组件内 signal 的数据,用于获取 signal 当前值的<span class="en1">函数</span>。</li>
<li><span class="en">setter</span>：触发反应式更新,用于修改 signal 的<span class="en1">函数</span>。</li>
<li>通过使用 getter 和 setter 来负责存储和管理数据，以及触发整个系统的更新。</li>
</ul>
</li>
<li><span class="en">createSignal</span>：该函数执行两个主要任务<ul>
<li>初始值</li>
<li>返回一个包含两个元素的数组：getter和setter函数</li>
<li>示例：createSignal的原型<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createSignal</span>(<span class="params">initialValue</span>) &#123;</span><br><span class="line">  <span class="comment">// 这个阶段不存在反应性</span></span><br><span class="line">  <span class="keyword">let</span> value = initialValue;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">getter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">setter</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line">    value = newValue;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> [getter, setter];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="订阅者-Subscribers"><a href="#订阅者-Subscribers" class="headerlink" title="订阅者 Subscribers"></a>订阅者 Subscribers</h3><ul>
<li>反应式系统的核心元素。</li>
<li>负责<span class="en1">跟踪信号的变化并相应地更新系统</span>。</li>
<li>是自动响应程序，使系统与最新的数据更改保持同步。</li>
<li>订阅者基于两个主要行为：<ul>
<li><span class="en">Observation</span>：订阅者的核心是观察信号。能及时捕抓正在跟踪的信号变化</li>
<li><span class="en">Response</span>：信号改变，订阅者会收到通知。触发响应信号的改变</li>
</ul>
</li>
</ul>
<h2 id="状态管理"><a href="#状态管理" class="headerlink" title="状态管理"></a>状态管理</h2><ul>
<li>作用：是处理和处理影响 Web 应用程序的行为和表示的数据的过程。涉及存储和更新数据</li>
<li>实现方式：通过信号和订阅者来处理。信号用于存储和更新数据，订阅者用于响应数据的更改</li>
<li>三要素：<ul>
<li><span class="en">State</span>：用于确定要向用户显示的内容的数据</li>
<li><span class="en">View</span>：状态对用户的只管表示</li>
<li><span class="en">Actions</span>：修改状态的事件</li>
<li>这些元素协同工作创建”单向数据流”。当修改状态行为，视图将更新当前状态并展示。</li>
</ul>
</li>
</ul>
<h3 id="管理基本状态"><a href="#管理基本状态" class="headerlink" title="管理基本状态"></a>管理基本状态</h3><ul>
<li>状态是应用程序的实施来源，用于确定要向用户显示的内容。</li>
<li>状态由信号表示,创建和使用过程与信号一样</li>
</ul>
<h3 id="跟踪更改"><a href="#跟踪更改" class="headerlink" title="跟踪更改"></a>跟踪更改</h3><ul>
<li>通过订阅者来监控数据的任何更新，并作出响应</li>
<li>响应式原句可用于创建订阅者</li>
<li>注意：<span class="key">要跟踪信号，必须在订阅者的范围内访问。否则不会触发</span></li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [count, setCount] = <span class="title function_">createSignal</span>(<span class="number">0</span>)</span><br><span class="line"><span class="title function_">createEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">count</span>())</span><br><span class="line">&#125;)</span><br><span class="line"><span class="title function_">setCount</span>(<span class="number">1</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="在UI中呈现状态"><a href="#在UI中呈现状态" class="headerlink" title="在UI中呈现状态"></a>在UI中呈现状态</h3><ul>
<li>使用JSX语法</li>
</ul>
<h3 id="派生信号"><a href="#派生信号" class="headerlink" title="派生信号"></a>派生信号</h3><ul>
<li>基于现有state值计算新的state值</li>
<li>注意：<span class="key">只可计算简单计算，而且每次使用都会重新计算</span></li>
<li>频繁使用或高昂计算可以使用createMemo替代，因为memo仅在值更新时运行一次，并且可以多次访问</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [count, setCount] = <span class="title function_">createSignal</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">doubleCount</span> = (<span class="params"></span>) =&gt; <span class="title function_">count</span>() * <span class="number">2</span> <span class="comment">// 这个就是派生信号</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="提升状态"><a href="#提升状态" class="headerlink" title="提升状态"></a>提升状态</h3><ul>
<li>含义：将state提升到一个共同的祖先组件</li>
<li>做法：就是在一个父组件定义state，然后这个父组件调用使用这个state的多个组件</li>
<li>在组件之间共享 state 时，可以通过props。</li>
<li>注意：<ul>
<li><span class="key">从父组件向下传递的 props 值是只读的。</span></li>
<li><span class="key">从父组件向下传递 setter 函数，子组件就可以间接修改父组件的状态。</span></li>
</ul>
</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createSignal, createEffect, createMemo &#125; <span class="keyword">from</span> <span class="string">&quot;solid-js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">createSignal</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> [doubleCount, setDoubleCount] = <span class="title function_">createSignal</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> squaredCount = <span class="title function_">createMemo</span>(<span class="function">() =&gt;</span> <span class="title function_">count</span>() * <span class="title function_">count</span>());</span><br><span class="line"></span><br><span class="line">  <span class="title function_">createEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setDoubleCount</span>(<span class="title function_">count</span>() * <span class="number">2</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/*父组件传递setter函数 */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Counter</span> <span class="attr">count</span>=<span class="string">&#123;count()&#125;</span> <span class="attr">setCount</span>=<span class="string">&#123;setCount&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">DisplayCounts</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">count</span>=<span class="string">&#123;count()&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">doubleCount</span>=<span class="string">&#123;doubleCount()&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">squaredCount</span>=<span class="string">&#123;squaredCount()&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 子组件可以使用setter函数修改</span></span><br><span class="line">    props.<span class="title function_">setCount</span>(<span class="function">(<span class="params">prev</span>) =&gt;</span> prev + <span class="number">1</span>); </span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;increment&#125;</span>&gt;</span>Increment<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">DisplayCounts</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>Current count: &#123;props.count&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>Doubled count: &#123;props.doubleCount&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>Squared count: &#123;props.squaredCount&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="管理复杂状态"><a href="#管理复杂状态" class="headerlink" title="管理复杂状态"></a>管理复杂状态</h3><ul>
<li>使用store</li>
</ul>
<h2 id="同步-vs-异步"><a href="#同步-vs-异步" class="headerlink" title="同步 vs 异步"></a>同步 vs 异步</h2><h3 id="同步反应性"><a href="#同步反应性" class="headerlink" title="同步反应性"></a>同步反应性</h3><ul>
<li>默认模式，系统以直接和线性的方式相应变化。</li>
<li>当信号发生变化时，任何相应的订阅者都会立即以<span class="en1">有序的方式更新</span>。</li>
</ul>
<h3 id="异步反应性"><a href="#异步反应性" class="headerlink" title="异步反应性"></a>异步反应性</h3><ul>
<li>系统以延迟或非线性方式响应变化。</li>
<li>当信号变化时，相应的订阅者不会立即更新。系统会等待特定事件或任务完成在更新</li>
<li>这在订阅者依赖多个信号的情况下非常重要，避免信号更新不同步导致数据不一致</li>
<li>注意：<span class="key">当存在异步响应性时，延迟非常重要。batch 可用于延迟更新。</span></li>
</ul>
<h2 id="关键概念（简单总结）"><a href="#关键概念（简单总结）" class="headerlink" title="关键概念（简单总结）"></a>关键概念（简单总结）</h2><ul>
<li>信号负责存储和管理数据。</li>
<li>由于 getter 和 setter，信号既可读又可写。</li>
<li>订阅者是自动响应者，可以跟踪信号的变化并相应地更新系统。</li>
<li>Signals 和 subscribers 协同工作，以确保系统与最新的数据更改保持同步。</li>
<li>反应式系统建立在数据驱动反应性原则之上。意味着系统的反应性是由它所基于的数据驱动。</li>
<li>反应式系统可以是同步的，也可以是异步的。</li>
</ul>
<h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><ul>
<li>基本跟 react 一样，省略</li>
</ul>
<h3 id="classList"><a href="#classList" class="headerlink" title="classList"></a>classList</h3><ul>
<li>作用：多个类应用于同一个元素时使用，处理多个条件类更有效</li>
<li>可以传递字符串或对象，其中 key 为类名，值为布尔表达式，当值为 false 删除</li>
<li>示例：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [current, setCurrent] = <span class="title function_">createSignal</span>(<span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line"></span><br><span class="line">&lt;button</span><br><span class="line">  classList=&#123;&#123; <span class="string">&quot;selected&quot;</span>: <span class="title function_">current</span>() === <span class="string">&#x27;foo&#x27;</span> &#125;&#125;</span><br><span class="line">  onClick=&#123;<span class="function">() =&gt;</span> <span class="title function_">setCurrent</span>(<span class="string">&#x27;foo&#x27;</span>)&#125;</span><br><span class="line">&gt;&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>注意：<ul>
<li><span class="key">与 class 一起用时，都是动态的情况下，应用 class 删除 classList</span><ul>
<li><span class="key">解决方式：class 设置为静态或动态的计算值，然后放在 classList 前</span></li>
</ul>
</li>
<li><span class="key">classList 是一个伪属性，不适用于<code>&lt;div &#123;...props&#125; /&gt;</code> 或 <code>&lt;Dynamic&gt;</code>中的 prop 跨页</span></li>
</ul>
</li>
</ul>
<h2 id="事件处理程序"><a href="#事件处理程序" class="headerlink" title="事件处理程序"></a>事件处理程序</h2><ul>
<li><span class="en">on:__</span>: 将事件侦听器添加到元素，这也称为本机事件</li>
<li><span class="en">on__</span>: 向 document 添加事件侦听器并将其调度到元素，这称为<span class="en1">委托事件</span></li>
<li>注意：<span class="key">委托事件不区分大小写，本机事件区分大小写</span></li>
</ul>
<h3 id="绑定事件"><a href="#绑定事件" class="headerlink" title="绑定事件"></a>绑定事件</h3><ul>
<li>避免使用 js 的 bind 方法和添加额外闭包的开销</li>
<li>以数组作为事件处理程序传递，数组第二项作为处理程序的第一个参数</li>
<li>示例：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handler</span> = (<span class="params">data, event</span>) =&gt; &#123;&#125;</span><br><span class="line"><span class="comment">// 单击按钮时，Hello!当作handler的第一个参数data传递进来</span></span><br><span class="line">&lt;button onClick=&#123;[handler, <span class="string">&#x27;Hello!&#x27;</span>]&#125;&gt;<span class="title class_">Click</span> <span class="title class_">Me</span>&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<h3 id="动态处理程序"><a href="#动态处理程序" class="headerlink" title="动态处理程序"></a>动态处理程序</h3><ul>
<li>事件处理程序<span class="en1">不构成响应式系统的一部分</span>。</li>
<li>事件不会动态更新，并且绑定不是反应性的</li>
<li>如果要将处理程序当作 signal 传递，将不会响应<ul>
<li>示例：<span class="desc"><code>&lt;div onClick=&#123;() =&gt; props.handleClick?.()&#125; /&gt;</code></span></li>
</ul>
</li>
</ul>
<h3 id="活动委托"><a href="#活动委托" class="headerlink" title="活动委托"></a>活动委托</h3><ul>
<li>通过 <span class="en">on__</span>形式</li>
<li>支持的事件：看下方的委托事件列表</li>
<li>如果需要将事件侦听器附加到<span  class="en1">事件委托不支持的元素</span>，如自定义元素，<span class="en1">使用 on:__</span></li>
</ul>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><ul>
<li>事件委托是为了通过 JSX 树而不是 DOM 树进行事件传播而设计的</li>
<li>委托事件侦听器按事件类型添加一次，并处理该类型的<span class="en1">所有未来事件</span>。 这意味着，即使删除了添加委托事件侦听器的元素及其处理程序，委托事件侦听器仍保持活动状态。<ul>
<li><span class="desc">例：如果 div 监听 mousemove 并在稍后被删除，则事件仍将被分派给 document，以防其他元素也在监听鼠标移动。</span></li>
</ul>
</li>
<li><span class="en1">对于不经常发生的事件使用on:__</span></li>
<li><span class="en1">event.stopPropagation()未按预期工作</span>，因为事件附加到 document 而不是 element。<ul>
<li><span class="en1">使用 on:__ 解决</span></li>
</ul>
</li>
<li>onChange 和 onInput 事件根据其<span class="en1">本机行为</span>工作：<ul>
<li><span class="en1">onInput 将在值更改后立即触发</span></li>
<li><span class="en1">在<code>&lt;input&gt;</code>字段中，onChange 仅在字段失去焦点后触发</span>。</li>
</ul>
</li>
</ul>
<h3 id="委托事件列表"><a href="#委托事件列表" class="headerlink" title="委托事件列表"></a>委托事件列表</h3><ul>
<li>beforeinput</li>
<li>click</li>
<li>dbclick</li>
<li>contextmenu</li>
<li>focusin</li>
<li>focusout</li>
<li>input</li>
<li>keydown</li>
<li>keyup</li>
<li>mousedown</li>
<li>mousemove</li>
<li>mouseout</li>
<li>mouseover</li>
<li>mouseup</li>
<li>pointerdown</li>
<li>pointermove</li>
<li>pointerout</li>
<li>pointerover</li>
<li>poinyerup</li>
<li>touchend</li>
<li>touchmove</li>
<li>touchstart</li>
</ul>
<h2 id="Props"><a href="#Props" class="headerlink" title="Props"></a>Props</h2><ul>
<li>将 state 从父组件传递到子组件的方法</li>
<li>使用方法跟 react 一样</li>
</ul>
<h3 id="mergeProps"><a href="#mergeProps" class="headerlink" title="mergeProps"></a>mergeProps</h3><ul>
<li>一个实用函数</li>
<li>作用：把多个潜在的反应性对象合并在一起。行为类似于 Object.assign 但将保留正在合并的属性的响应性。</li>
<li>合并 props 时，如果 props 没有该值，则将使用第一个对象的值。</li>
<li>示例：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mergeProps &#125; <span class="keyword">from</span> <span class="string">&#x27;solid-js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyComponent</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="comment">// mergeProps 第一个对象是设置默认值，当props中没有该值则使用第一个对象的值</span></span><br><span class="line">  <span class="keyword">const</span> finalProps = <span class="title function_">mergeProps</span>(&#123; <span class="attr">defaultName</span>: <span class="string">&#x27;Ryan Carniato&#x27;</span> &#125;, props)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello &#123;finalProps.defaultName&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Usage: &lt;MyComponent defaultName=&quot;Ryan Carniato&quot; /&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="解构-props"><a href="#解构-props" class="headerlink" title="解构 props"></a>解构 props</h3><ul>
<li>在Solid中，不建议使用解构 props，会破坏响应性。正确使用方式看示例</li>
<li>示例：<span class="desc"><code>const name = () =&gt; props.name</code></span></li>
</ul>
<h3 id="splitProps"><a href="#splitProps" class="headerlink" title="splitProps"></a>splitProps</h3><ul>
<li>实用函数，<span class="en1">将单个 props 对象拆分成多组 props</span>，同时保留其响应性</li>
<li>含义：定义一个或多个 key 数组，并能提取到单独的 props 对象中，同时保留各个属性的响应性。</li>
<li>返回：一个与每组键相关的 props 对象数组，以及一个包含任何剩余键的附加 props 对象。</li>
<li>用途：当 props 传递给子组件时，使用 splitProps 将 props 分成多个组，然后将每个组传递给相应的子组件：</li>
<li>示例：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; splitProps &#125; <span class="keyword">from</span> <span class="string">&#x27;solid-js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ParentComponent</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="comment">// 第一个参数是props， 之后的参数是要拆分的组</span></span><br><span class="line">  <span class="keyword">const</span> [greetingProps, personalInfoProps, restProps] = <span class="title function_">splitProps</span>(</span><br><span class="line">    props,</span><br><span class="line">    [<span class="string">&#x27;name&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;age&#x27;</span>]</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  <span class="comment">// greetingProps == name组（组中包含name属性）</span></span><br><span class="line">  <span class="comment">// personalInfoProps == age组（组中包含啊age属性）</span></span><br><span class="line">  <span class="comment">// restProps == props除去name和age 的组，附加 props 对象</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Greeting</span> &#123;<span class="attr">...greetingProps</span>&#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">PersonalInfo</span> &#123;<span class="attr">...personalInfoProps</span>&#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* restProps can be passed down or used as needed */&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="将-props-传递给-children"><a href="#将-props-传递给-children" class="headerlink" title="将 props 传递给 children"></a>将 props 传递给 children</h3><ul>
<li>多数情况下，直接使用props。</li>
<li>避免重复创建子组件或元素</li>
<li>示例：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; children &#125; <span class="keyword">from</span> <span class="string">&#x27;solid-js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ColoredList</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> safeChildren = <span class="title function_">children</span>(<span class="function">() =&gt;</span> props.<span class="property">children</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span>&#123;safeChildren()&#125;<span class="tag">&lt;/&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="螺旋桨钻孔-Prop-Drilling"><a href="#螺旋桨钻孔-Prop-Drilling" class="headerlink" title="螺旋桨钻孔 Prop Drilling"></a>螺旋桨钻孔 Prop Drilling</h3><ul>
<li>含义：用于描述将 prop 传递多个组件的过程</li>
<li>由于 Solid 中的组件不拥有 state，因此不需要 props 在组件之间传递 state，但可以使用 props。因此，有时可能需要通过多层组件传递 props。</li>
<li>多层级传递的缺点：props 难以管理，组件收到它们不需要的 props、不必要的重渲染和麻烦的重构</li>
<li><h3 id="避免多层级传递props"><a href="#避免多层级传递props" class="headerlink" title="避免多层级传递props"></a>避免多层级传递props</h3><ul>
<li>常见解决方案：使用 Context 将 state 传递给深度嵌套的组件</li>
</ul>
</li>
</ul>
<h2 id="条件渲染-Show标签"><a href="#条件渲染-Show标签" class="headerlink" title="条件渲染 Show标签"></a>条件渲染 Show标签</h2><ul>
<li>属性值<ul>
<li><span class="en">when</span>：判断是否渲染 children</li>
<li><span class="en">fallback</span>：当结果为 false，展示失败时的渲染 children</li>
</ul>
</li>
<li>有多个条件需要处理，采用嵌套的方式</li>
<li>示例：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Show</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;solid-js&#x27;</span></span><br><span class="line"></span><br><span class="line">&lt;<span class="title class_">Show</span></span><br><span class="line">  when=&#123;!data.<span class="property">loading</span>&#125;</span><br><span class="line">  fallback=&#123;<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&#125;</span><br><span class="line">&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hi, I am &#123;data().name&#125;.<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Show</span> <span class="attr">when</span>=<span class="string">&#123;data.error&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Error: &#123;data.error&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Show</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Show</span>&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Switch-标签和-Match-标签"><a href="#Switch-标签和-Match-标签" class="headerlink" title="Switch 标签和 Match 标签"></a>Switch 标签和 Match 标签</h2><ul>
<li>处理多个条件,类似于 switch&#x2F;case</li>
<li>属性值：<ul>
<li><span class="en">fallback</span>：当所有条件都不符合时渲染</li>
<li><span class="en">when</span>：判断是否渲染这个Match</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Switch</span>, <span class="title class_">Match</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;solid-js&#x27;</span></span><br><span class="line"></span><br><span class="line">&lt;<span class="title class_">Switch</span> fallback=&#123;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Fallback content<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#125;&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Match</span> <span class="attr">when</span>=<span class="string">&#123;condition1&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Outcome 1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Match</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Match</span> <span class="attr">when</span>=<span class="string">&#123;condition2&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Outcome 2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Match</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Switch</span>&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Dynamic-标签"><a href="#Dynamic-标签" class="headerlink" title="Dynamic 标签"></a>Dynamic 标签</h2><ul>
<li>允许根据数据动态渲染组件</li>
<li>比<code>&lt;Switch&gt;</code>和<code>&lt;Match&gt;</code>简洁</li>
<li>属性值：<ul>
<li><span class="en">component</span>：传递一个动态的事件</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createSignal, <span class="title class_">For</span> &#125; <span class="keyword">from</span> <span class="string">&quot;solid-js&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Dynamic</span> &#125; <span class="keyword">from</span> <span class="string">&quot;solid-js/web&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">RedDiv</span> = (<span class="params"></span>) =&gt; <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span>Red<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">GreenDiv</span> = (<span class="params"></span>) =&gt; <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;color: green&quot;</span>&gt;</span>Green<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">BlueDiv</span> = (<span class="params"></span>) =&gt; <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;color: blue&quot;</span>&gt;</span>Blue<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  <span class="attr">red</span>: <span class="title class_">RedDiv</span>,</span><br><span class="line">  <span class="attr">green</span>: <span class="title class_">GreenDiv</span>,</span><br><span class="line">  <span class="attr">blue</span>: <span class="title class_">BlueDiv</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [selected, setSelected] = <span class="title function_">createSignal</span>(<span class="string">&quot;red&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">select</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;selected()&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onInput</span>=<span class="string">&#123;(e)</span> =&gt;</span> setSelected(e.currentTarget.value)&#125;</span></span><br><span class="line"><span class="language-xml">      &gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">For</span> <span class="attr">each</span>=<span class="string">&#123;Object.keys(options)&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;(color) =&gt; <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&#123;color&#125;</span>&gt;</span>&#123;color&#125;<span class="tag">&lt;/<span class="name">option</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">For</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="comment">&lt;!-- 选择对应的颜色，触发对应的事件--&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Dynamic</span> <span class="attr">component</span>=<span class="string">&#123;options[selected()]&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="列表呈现"><a href="#列表呈现" class="headerlink" title="列表呈现"></a>列表呈现</h2><ul>
<li>渲染列表</li>
</ul>
<h3 id="For-标签"><a href="#For-标签" class="headerlink" title="For 标签"></a>For 标签</h3><ul>
<li>循环组件，根据数组或对象的内容呈现元素</li>
<li>使用场景：与复杂的数据结构一起使用，如列表的顺序和长度会频繁更改的情况使用</li>
<li>唯一的属性：<ul>
<li><span class="en">each</span>：指定要循环访问的数据收集，接受一个<span class="en1">数组</span>或者<span class="en1">使用 Object.entries()或 Object.value 处理的对象</span></li>
</ul>
</li>
<li>标签之间，组件需要有一个回调函数，类似于 map<ul>
<li><span class="en">item</span>：表示正在渲染的数据收集中的当前项</li>
<li><span class="en">index</span>：当前项在数据中的索引，<span class="en1">index 是一个信号，必须使用函数调用</span>才能检索</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">For</span> each=&#123;<span class="title function_">data</span>()&#125;&gt;</span><br><span class="line">  &#123;<span class="function">(<span class="params">item, index</span>) =&gt;</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">color:</span> <span class="attr">index</span>() % <span class="attr">2</span> === <span class="string">0</span> ? &#x27;<span class="attr">red</span>&#x27; <span class="attr">:</span> &#x27;<span class="attr">blue</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;item.name&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  )&#125;</span><br><span class="line">&lt;/<span class="title class_">For</span>&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Index-标签"><a href="#Index-标签" class="headerlink" title="Index 标签"></a>Index 标签</h3><ul>
<li>循环组件，与<code>&lt;For&gt;</code>类似</li>
<li>使用场景：列表顺序和长度保持稳定，但内容会频繁更改时使用</li>
<li><code>&lt;Index&gt;</code>更关注元素在数组中的索引，所以回调中 index 固定</li>
<li><span class="en1">item 是信号，必须使用函数调用</span>才能检索</li>
<li>示例：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Index</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;solid-js&#x27;</span></span><br><span class="line"></span><br><span class="line">&lt;<span class="title class_">Index</span> each=&#123;<span class="title function_">data</span>()&#125;&gt;</span><br><span class="line">  &#123;<span class="function">(<span class="params">item, index</span>) =&gt;</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;item().name&#125; - &#123;item().completed&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  )&#125;</span><br><span class="line">&lt;/<span class="title class_">Index</span>&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Index-标签-vs-For-标签"><a href="#Index-标签-vs-For-标签" class="headerlink" title="Index 标签 vs For 标签"></a>Index 标签 vs For 标签</h3><ul>
<li><span class="en">For</span>: <ul>
<li><span class="en1">当列表的顺序和长度可能频繁更改时使用。</span></li>
<li><span class="en1">当列表值更改时，将刷新整个列表。但是，如果数据发生变化，如元素位置移动，只会修改列表中元素的索引，而不是重新渲染整个列表</span></li>
<li>最佳使用场景：在不需要信号、嵌套循环或动态列表的情况下</li>
</ul>
</li>
<li><span class="en">Index</span>: <ul>
<li>当列表的顺序和长度保持稳定，但<span class="en1">内容可能会频繁更改时使用。</span></li>
<li><span class="en1">当列表值更改时，只会更新指定索引处的内容，而列表的其余部分保持不变。</span></li>
<li>最佳使用场景：处理信号，JavaScript 基元（如字符串和数字）或 input 字段时</li>
</ul>
</li>
</ul>
<h2 id="Portal-标签"><a href="#Portal-标签" class="headerlink" title="Portal 标签"></a>Portal 标签</h2><ul>
<li><code>&lt;Portal&gt;</code>通过将元素放在文档中的其他位置，将元素引入文档流中</li>
<li>默认情况下，嵌套的内容将呈现并放置在正文末尾</li>
<li>可以通过 prop 传递给<code>&lt;Protal&gt;</code>来更改当前内容的挂载点。prop 接受一个 DOM 节点</li>
<li>使用场景：<ul>
<li>弹窗</li>
<li>父元素溢出等行为影响到<code>&lt;Protal&gt;</code>的内容时，可以将其放在父元素外</li>
<li>元素需要在文档流外进行渲染时，堆叠内容和 z-index影响到视图</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Portal</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;solid-js/web&#x27;</span></span><br><span class="line"></span><br><span class="line">&lt;<span class="title class_">Portal</span> mount=&#123;<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;main&#x27;</span>)&#125;&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;popup&#x27;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Portal</span>&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>注意：<ul>
<li><code>&lt;Protal&gt;</code>将呈现包装，除非针对 document.head</li>
<li>事件会根据组件层次结构而不是元素层次结构</li>
<li><span class="key">默认情况下，子项包裹在 div。如果应用在 SVG 上，必须使用 isSVG 属性来避免子项包裹在 div 中</span></li>
</ul>
</li>
</ul>
<h2 id="ErrorBoundary-标签"><a href="#ErrorBoundary-标签" class="headerlink" title="ErrorBoundary 标签"></a>ErrorBoundary 标签</h2><ul>
<li>含义：用于创建错误边界。它会捕获在渲染或更新其子项期间发生的任何错误</li>
<li>注意: <span class="key">在渲染过程之外发生的错误(如在事件处理程序中或在 setTimeout 之后)不会被捕获</span></li>
<li>属性值：<ul>
<li><span class="en">fallback</span>：可用于在发生错误时显示用户友好的错误消息或通知。<ul>
<li>如果 fallback 是回调函数：<ul>
<li><span class="en">error</span>：error 对象</li>
<li><span class="en">reset</span>：重新渲染其子项并重置错误状态，为用户提供一种从错误中恢复的方法。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Effects"><a href="#Effects" class="headerlink" title="Effects"></a>Effects</h2><ul>
<li>管理副作用，当它们所依赖的信号发生变化时触发的函数</li>
<li>场景：DOM、数据获取和订阅</li>
<li>createEffect: 传入一个函数，该函数立即调用其中的函数<ul>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createEffect</span>(<span class="params">fn</span>)&#123;</span><br><span class="line">  <span class="title function_">fn</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="管理依赖项"><a href="#管理依赖项" class="headerlink" title="管理依赖项"></a>管理依赖项</h3><ul>
<li>Solid 会自动跟踪效果的依赖关系，因此<span class="en1">无需手动指定依赖项</span>。</li>
<li>signals、变量、props、context 或任何其他响应式值，任何一个更改，都会重新运行</li>
<li><span class="en1">初始化后，将运行一次</span>，无论它是否有任何依赖项。<span class="en1">当依赖性更改才会再次运行</span></li>
</ul>
<h3 id="订阅信号"><a href="#订阅信号" class="headerlink" title="订阅信号"></a>订阅信号</h3><ul>
<li>当 Effect 设置为观察信号事，它会创建对该信号的订阅</li>
<li>一个 Effect 具有观察多个信号的能力，多个 Effect 可以跟踪单个信号</li>
<li>注意：<span class="key">当信号更新时，会按顺序通知所有订阅者，虽然可以保证 effect 在信号更新时运行，但执行可能不是即时的。这意味 Effect 的执行下顺序无法保证</span></li>
</ul>
<h3 id="嵌套效果"><a href="#嵌套效果" class="headerlink" title="嵌套效果"></a>嵌套效果</h3><ul>
<li><span class="en1">允许每个效果单独跟踪自己的依赖项，而不会影响它嵌套在其中的效果</span></li>
<li>执行顺序很重要。<span class="en1">内部效果不会影响外部效果。</span></li>
<li>内部效果器中访问的信号不会注册为外部效果器的依赖项。</li>
<li>示例：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createSignal, createEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;solid-js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [count, setCount] = <span class="title function_">createSignal</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="title function_">createEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Outer effect starts&#x27;</span>)</span><br><span class="line">  <span class="title function_">createEffect</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">count</span>())) <span class="comment">// 当count变化, 仅运行该条Effect不影响外部</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Outer effect ends&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="生命周期函数"><a href="#生命周期函数" class="headerlink" title="生命周期函数"></a>生命周期函数</h3><h4 id="onMount"><a href="#onMount" class="headerlink" title="onMount"></a>onMount</h4><ul>
<li>只运行一次副作用,类似于 Effect，但不跟踪依赖项。</li>
<li><span class="en1">一旦组件初始化，回调将被执行且不会再次执行</span></li>
<li>比较适合只调用一次的 API</li>
<li>示例：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onMount &#125; <span class="keyword">from</span> <span class="string">&#x27;solid-js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Component</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = <span class="title function_">createSignal</span>(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">createEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">data</span>() <span class="comment">// will run every time data changes</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onMount</span>(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="comment">// will run only once, when the component is mounted</span></span><br><span class="line">    <span class="keyword">const</span> fetchedData = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://example.com/data&#x27;</span>)</span><br><span class="line">    <span class="title function_">setData</span>(fetchedData)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="onCleanup"><a href="#onCleanup" class="headerlink" title="onCleanup"></a>onCleanup</h4><ul>
<li>在不需要任务时清理任务。</li>
<li><span class="en1">将在组件卸载时运行，并删除 Effect 具有的所有订阅</span></li>
<li>可以避免内存泄漏</li>
<li>适合清除定时器</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onCleanup &#125; <span class="keyword">from</span> <span class="string">&#x27;solid-js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">const</span> [count, setCount] = <span class="title function_">createSignal</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="title function_">setCount</span>(<span class="function">(<span class="params">prev</span>) =&gt;</span> prev + <span class="number">1</span>)</span><br><span class="line">	&#125;, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">	<span class="title function_">onCleanup</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">clearInterval</span>(timer)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Count: &#123;count()&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="memo"><a href="#memo" class="headerlink" title="memo"></a>memo</h2><ul>
<li>是一种响应式值，可用于记忆派生状态或昂贵的计算</li>
<li><span class="en1">仅对其依赖项的每次更改执行一次</span></li>
<li>示例：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createMemo, createSignal &#125; <span class="keyword">from</span> <span class="string">&#x27;solid-js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [count, setCount] = <span class="title function_">createSignal</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isEven = <span class="title function_">createMemo</span>(<span class="function">() =&gt;</span> <span class="title function_">count</span>() % <span class="number">2</span> === <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isEven</span>()) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">setCount</span>(<span class="number">3</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isEven</span>()) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="Memo-vs-Effect"><a href="#Memo-vs-Effect" class="headerlink" title="Memo vs Effect"></a>Memo vs Effect</h3><table>
<thead>
<tr>
<th></th>
<th>Memo</th>
<th>Effect</th>
</tr>
</thead>
<tbody><tr>
<td>返回值</td>
<td>返回计算或派生状态结果的 getter</td>
<td>不返回，但执行代码块以响应更改</td>
</tr>
<tr>
<td>缓存结果</td>
<td>是</td>
<td>不</td>
</tr>
<tr>
<td>行为</td>
<td>参数应该是干净的，没有反应式的副作用</td>
<td>可能会导致 UI 更新或数据获取等副作用</td>
</tr>
<tr>
<td>依赖项跟踪</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>示例用例</td>
<td>转换数据结构、计算聚合值、派生状态或其他昂贵的计算</td>
<td>UI 更新、网络请求或外部集</td>
</tr>
</tbody></table>
<h3 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h3><h4 id="纯函数"><a href="#纯函数" class="headerlink" title="纯函数"></a>纯函数</h4><ul>
<li>不会引起任何副作用的函数。意味着函数的输出取决于其输入</li>
<li>在memo中引入Effect，会导致无限循环，应改用createEffect()</li>
</ul>
<h4 id="将逻辑保留在memo中"><a href="#将逻辑保留在memo中" class="headerlink" title="将逻辑保留在memo中"></a>将逻辑保留在memo中</h4><ul>
<li>当派生state，使用memo</li>
</ul>
<h2 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h2><ul>
<li><a target="_blank" rel="noopener" href="https://docs.solidjs.com/concepts/context">Context文档</a></li>
</ul>
<h3 id="何时使用？"><a href="#何时使用？" class="headerlink" title="何时使用？"></a>何时使用？</h3><ul>
<li>需要共享state的大型组件树时，可以避免prop钻探</li>
<li>共享全局数据或应用程序组件树的多个组件定期访问的信息</li>
</ul>
<h3 id="创建和使用"><a href="#创建和使用" class="headerlink" title="创建和使用"></a>创建和使用</h3><ul>
<li>在全局中创建&#x2F;content&#x2F;create.js<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createContext &#125; <span class="keyword">from</span> <span class="string">&quot;solid-js&quot;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyContext</span> = <span class="title function_">createContext</span>()</span><br></pre></td></tr></table></figure></li>
<li>在全局中创建&#x2F;context&#x2F;component.jsx<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MyContext</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./create.js&quot;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">Provider</span> (<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">MyContext.Provider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;props.children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">MyContext.Provider</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>传递单个值，直接在MyContext.Provider传递<ul>
<li><span class="desc">示例：<code>&lt;MyContext.Provider value=&quot;new value&quot;&gt;&lt;/MyContext.Provider&gt;</code></span></li>
</ul>
</li>
<li>传递多个值（如数组或Object）使用store</li>
</ul>
<h3 id="自定义上下文实用程序"><a href="#自定义上下文实用程序" class="headerlink" title="自定义上下文实用程序"></a>自定义上下文实用程序</h3><ul>
<li>当app包含多个上下文对象时，很难追踪正在使用的上下文对象。解决方式：创建自定义app</li>
</ul>
<h4 id="在app的不同区域访问Provider-导入组件并封装组件树"><a href="#在app的不同区域访问Provider-导入组件并封装组件树" class="headerlink" title="在app的不同区域访问Provider,导入组件并封装组件树"></a>在app的不同区域访问Provider,导入组件并封装组件树</h4><ul>
<li>结合·创建和使用·的代码一起看，步骤相似</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CounterProvider</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./counterProvider&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">CounterProvider</span> <span class="attr">count</span>=<span class="string">&#123;1&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Welcome to Counter<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">NestedComponents</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">CounterProvider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="创建自定义实用程序来访问上下文"><a href="#创建自定义实用程序来访问上下文" class="headerlink" title="创建自定义实用程序来访问上下文"></a>创建自定义实用程序来访问上下文</h4><ul>
<li>可以更轻松访问所需值，而不是在使用它的组件上导入和传入上下文对象</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 封装</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useCounter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">useContext</span>(<span class="title class_">CounterContext</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 应用</span></span><br><span class="line"><span class="keyword">import</span> &#123; useCounter &#125; <span class="keyword">from</span> <span class="string">&quot;./counter&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">CounterProvider</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> count = <span class="title function_">useCounter</span>();</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;count()&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="更新上下文"><a href="#更新上下文" class="headerlink" title="更新上下文"></a>更新上下文</h3><ul>
<li>信号提供一种方式使用上下文去同步和管理组件之间共享的数据方法。</li>
<li>是一种跨组件管理状态的方法，中间不必通过中间元素传递props</li>
<li><span class="en1">可以将信号直接传递给 Provider 组件的 value属性</span>，对信号的任何更改都将反映在所有使用上下文的组件中。</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建Context.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; createSignal, useContext &#125; <span class="keyword">from</span> <span class="string">&quot;solid-js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">CounterProvider</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">createSignal</span>(props.<span class="property">initialCount</span> || <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> counter = [</span><br><span class="line">    count,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">setCount</span>(<span class="function"><span class="params">prev</span> =&gt;</span> prev + <span class="number">1</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="title function_">decrement</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">setCount</span>(<span class="function"><span class="params">prev</span> =&gt;</span> prev - <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">CounterContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;counter&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;props.children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">CounterContext.Provider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useCounter</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="title function_">useContext</span>(<span class="title class_">CounterContext</span>); &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 应用到全局App.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CounterProvider</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./Context&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Child</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">CounterProvider</span> <span class="attr">count</span>=<span class="string">&#123;1&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Welcome to Counter App<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">CounterProvider</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在这个组件单独使用上下文Child.tsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; useCounter &#125; <span class="keyword">from</span> <span class="string">&quot;./Context&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, &#123; increment, decrement &#125;] = <span class="title function_">useCounter</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;count()&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;increment&#125;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;decrement&#125;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="使用上下文进行调试"><a href="#使用上下文进行调试" class="headerlink" title="使用上下文进行调试"></a>使用上下文进行调试</h3><ul>
<li>createContext接受可选的 default 值，如果未提供，则可能会返回undefined</li>
<li>解决TS报错：<ul>
<li>1.指定默认值</li>
<li>2.使用自定义app处理好后在使用（错误在自定义app中处理，使用处理好后的自定义app）</li>
</ul>
</li>
</ul>
<h3 id="createContext-和-useContext-常见问题"><a href="#createContext-和-useContext-常见问题" class="headerlink" title="createContext 和 useContext 常见问题"></a>createContext 和 useContext 常见问题</h3><ul>
<li>如果没有将默认值传递给 createContext，则 useContext 可能会返回 undefined。</li>
<li>解决TS报错：将 useContext 的所有使用包装在一个函数中，如果上下文未定义，该函数将显式地抛出一个有用的错误。</li>
<li>示例： 跟createContext的处理方式一样<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">useCounterContext</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> context = <span class="title function_">useContext</span>(<span class="title class_">CounterContext</span>)</span><br><span class="line">  <span class="keyword">if</span> (!context) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;can&#x27;t find CounterContext&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> context</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="仓库-Store"><a href="#仓库-Store" class="headerlink" title="仓库 Store"></a>仓库 Store</h2><ul>
<li>store 可以生成一组反应式信号，每个信号对应于一个特定的属性，这在处理复杂状态时可能很有用</li>
</ul>
<h3 id="创建Store"><a href="#创建Store" class="headerlink" title="创建Store"></a>创建Store</h3><ul>
<li>可以管理多种数据类型，包括对象、数组、字符串和数字</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&quot;solid-js/store&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Initialize store</span></span><br><span class="line"><span class="keyword">const</span> [store, setStore] = <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">userCount</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="attr">users</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">id</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&quot;felix909&quot;</span>,</span><br><span class="line">      <span class="attr">location</span>: <span class="string">&quot;England&quot;</span>,</span><br><span class="line">      <span class="attr">loggedIn</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&quot;tracy634&quot;</span>,</span><br><span class="line">      <span class="attr">location</span>: <span class="string">&quot;Canada&quot;</span>,</span><br><span class="line">      <span class="attr">loggedIn</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&quot;johny123&quot;</span>,</span><br><span class="line">      <span class="attr">location</span>: <span class="string">&quot;India&quot;</span>,</span><br><span class="line">      <span class="attr">loggedIn</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="访问Store"><a href="#访问Store" class="headerlink" title="访问Store"></a>访问Store</h3><ul>
<li>语句：<span class="en">store.xxx(xxx指仓库的属性)</span></li>
<li>Store初始状态不会跟踪更改，此时去更改会报错。这些信号是惰性创建的，这意味着只有在响应式上下文中访问时才会形成（例如在组件函数、计算属性或效果的 return 语句中）</li>
<li><span class="en1">创建完后放在createEffect，会建立起跟踪，就可以访问到。</span></li>
</ul>
<h3 id="修改Store值"><a href="#修改Store值" class="headerlink" title="修改Store值"></a>修改Store值</h3><ul>
<li>语句：<span class="en">setStore(key, newValue)</span>，会自动更新的</li>
<li>也可以使用嵌套store来设置属性</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [store, setStore] = <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">userCount</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="attr">users</span>: [ ... ],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [users, setUsers] = <span class="title function_">createStore</span>(store.<span class="property">users</span>)</span><br><span class="line"></span><br><span class="line"><span class="title function_">setUsers</span>(<span class="function">(<span class="params">currentUsers</span>) =&gt;</span> [</span><br><span class="line">  ...currentUsers,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&quot;michael584&quot;</span>,</span><br><span class="line">    <span class="attr">location</span>: <span class="string">&quot;Nigeria&quot;</span>,</span><br><span class="line">    <span class="attr">loggedIn</span>: <span class="literal">false</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">])</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Path语法灵活性"><a href="#Path语法灵活性" class="headerlink" title="Path语法灵活性"></a>Path语法灵活性</h3><ul>
<li>初始参数用于指定导致要修改的目标值的键，而最后一个参数提供新值。</li>
<li>不仅可以使用字符串键，还可以选择使用键数组</li>
<li><span class="desc">示例：setState([1,3], user &#x3D;&gt; user.loggedln, false) &#x2F;&#x2F; 把users数组中索引为1和3的user.loggedln状态改为false</span></li>
</ul>
<h3 id="修改数组中的值"><a href="#修改数组中的值" class="headerlink" title="修改数组中的值"></a>修改数组中的值</h3><ul>
<li>path语法不依赖于发现单个索引，而是引入几种强大的数组作技术。</li>
</ul>
<h4 id="追加新值"><a href="#追加新值" class="headerlink" title="追加新值"></a>追加新值</h4><ul>
<li>要将新元素追加到 store 中的数组，请指定目标数组并将索引设置为所需位置。 <ul>
<li><span class="desc">例如: 如果要将新元素追加到数组的末尾，则可以将索引设置为：array.length</span><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setStore</span>(<span class="string">&quot;users&quot;</span>, <span class="function">(<span class="params">otherUsers</span>) =&gt;</span> [</span><br><span class="line">  ...otherUsers,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&quot;michael584&quot;</span>,</span><br><span class="line">    <span class="attr">location</span>: <span class="string">&quot;Nigeria&quot;</span>,</span><br><span class="line">    <span class="attr">loggedIn</span>: <span class="literal">false</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 变成这样</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">setStore</span>(<span class="string">&quot;users&quot;</span>, store.<span class="property">users</span>.<span class="property">length</span>, &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="attr">username</span>: <span class="string">&quot;michael584&quot;</span>,</span><br><span class="line">  <span class="attr">location</span>: <span class="string">&quot;Nigeria&quot;</span>,</span><br><span class="line">  <span class="attr">loggedIn</span>: <span class="literal">false</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="修改多个元素"><a href="#修改多个元素" class="headerlink" title="修改多个元素"></a>修改多个元素</h4><ul>
<li>使用路径语法，可以定位数组的元素子集，或对象的属性，通过指定数组或索引范围。</li>
<li>如果store.users是对象数组，可以一次设置多个索引对应的属性<ul>
<li><span class="desc">示例：setStore(“users”, [2, 7, 10], “loggedIn”, false)</span></li>
</ul>
</li>
<li>如果store.users是对象将对象名映射到对象，可以一次设置多个用户的属性<ul>
<li><span class="desc">示例：setStore(“users”, [“me”, “you”], “loggedIn”, false)</span></li>
</ul>
</li>
<li>特别是对于数组，可以通过from 和 to指定索引范围（包括from 和to值）<ul>
<li><span class="desc">示例：setStore(“users”, {from: 1, to: store.users.length - 1}, “loggedIn”, false) &#x2F;&#x2F; 除了索引0都改变 </span></li>
</ul>
</li>
<li>在 range 对象中包含一个键来指定步长<ul>
<li><span class="desc">示例：setStore(“users”, { from: 0, to: store.users.length - 1, by: 2 }, “loggedIn”, false) 每2的倍数改变</span></li>
</ul>
</li>
</ul>
<h4 id="动态值分配"><a href="#动态值分配" class="headerlink" title="动态值分配"></a>动态值分配</h4><ul>
<li>函数接收旧值作为参数，允许您根据现有值计算新值</li>
<li><span class="desc">示例：setStore(“users”, 3, “loggedIn” , (loggedIn) &#x3D;&gt; !loggedIn)</span></li>
</ul>
<h4 id="筛选值"><a href="#筛选值" class="headerlink" title="筛选值"></a>筛选值</h4><ul>
<li>使用函数充当过滤器，该函数接收旧值和索引作为参数</li>
<li>除了.startsWith，还可以使用其他数组方法，例如.find以筛选所需的值。</li>
<li><span class="desc">示例：setStore(“users”, (user) &#x3D;&gt; user.username.startsWith(“t”), “loggedIn”, false) &#x2F;&#x2F; username开头为t的改变</span></li>
</ul>
<h3 id="修改对象"><a href="#修改对象" class="headerlink" title="修改对象"></a>修改对象</h3><ul>
<li>如果新值是对象，则会与现有值进行浅层合并。如果新对象中的值于旧对象有重叠，把旧值改为新值。</li>
<li>可以直接对 store 进行更改，而无需展开现有对象的属性。</li>
<li><span class="desc">示例：setStore(“users”, 0, { id: 109,})</span></li>
</ul>
<h3 id="Store-的实体函数"><a href="#Store-的实体函数" class="headerlink" title="Store 的实体函数"></a>Store 的实体函数</h3><h4 id="存储更新-produce"><a href="#存储更新-produce" class="headerlink" title="存储更新 produce"></a>存储更新 produce</h4><ul>
<li>提供了一种处理数据的方法，就好像它是可变的 JavaScript 对象一样。</li>
<li>还提供了一种同时更改多个属性的方法，无需多次调用。</li>
<li>注意：<span class="key">它是专门为处理数组和对象而设计的。其他集合类型与此实用程序不兼容。</span></li>
<li>produce vs setStore<ul>
<li>两者都可用于修改状态，但关键区别在于它们如何处理数据。 </li>
<li><span class="en">produce</span>：允许使用 State 的临时 Draft，应用更改，然后生成新的 Store 不可变版本。</li>
<li><span class="en">setStore</span>：提供了一种更直接的方式来直接更新 store，而无需创建新版本。</li>
</ul>
</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; produce &#125; <span class="keyword">from</span> <span class="string">&quot;solid-js/store&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改users的0号元素的值</span></span><br><span class="line"><span class="title function_">setStore</span>(</span><br><span class="line">  <span class="string">&quot;users&quot;</span>,</span><br><span class="line">  <span class="number">0</span>,</span><br><span class="line">  <span class="title function_">produce</span>(<span class="function">(<span class="params">user</span>) =&gt;</span> &#123;</span><br><span class="line">    user.<span class="property">username</span> = <span class="string">&quot;newUsername&quot;</span></span><br><span class="line">    user.<span class="property">location</span> = <span class="string">&quot;newLocation&quot;</span></span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="数据集成reconcile"><a href="#数据集成reconcile" class="headerlink" title="数据集成reconcile"></a>数据集成reconcile</h4><ul>
<li>当需要将新信息合并到现有store时，reconcile可能会很有用。</li>
<li><span class="en1">reconcile将确定新数据和现有数据之间的差异，并仅在值发生更改时启动更新</span>，从而避免不必要的更新</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; createStore, reconcile &#125; <span class="keyword">from</span> <span class="string">&quot;solid-js/stores&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [data, setData] = <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">animals</span>: [<span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;dog&#x27;</span>, <span class="string">&#x27;bird&#x27;</span>, <span class="string">&#x27;gorilla&#x27;</span>]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> newData = <span class="title function_">getNewData</span>() <span class="comment">// eg. contains [&#x27;cat&#x27;, &#x27;dog&#x27;, &#x27;bird&#x27;, &#x27;gorilla&#x27;, &#x27;koala&#x27;]</span></span><br><span class="line"><span class="title function_">setData</span>(<span class="string">&#x27;animals&#x27;</span>, <span class="title function_">reconcile</span>(newData))</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="提取原始数据unwrap"><a href="#提取原始数据unwrap" class="headerlink" title="提取原始数据unwrap"></a>提取原始数据unwrap</h4><ul>
<li>将 store 转换为标准对象的方法</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore, unwrap &#125; <span class="keyword">from</span> <span class="string">&quot;solid-js/store&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [data, setData] = <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">animals</span>: [<span class="string">&quot;cat&quot;</span>, <span class="string">&quot;dog&quot;</span>, <span class="string">&quot;bird&quot;</span>, <span class="string">&quot;gorilla&quot;</span>],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rawData = <span class="title function_">unwrap</span>(data)</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a>Refs</h2><ul>
<li>以附加到任何元素，用于引用 DOM 元素或组件实例</li>
</ul>
<h3 id="访问DOM元素"><a href="#访问DOM元素" class="headerlink" title="访问DOM元素"></a>访问DOM元素</h3><ul>
<li>不建议通过元素选择器访问 DOM 元素</li>
<li>由于 Solid 中的元素可以根据state在 DOM 中添加或删除，因此需要等到元素附加到 DOM 后才能访问它。可以通过使用onMount等到元素附加到 DOM 后再访问它</li>
</ul>
<h3 id="JSX作为值"><a href="#JSX作为值" class="headerlink" title="JSX作为值"></a>JSX作为值</h3><ul>
<li>可以在直接访问 DOM 元素时分配给变量</li>
<li>优点：可以多次使用，而不用担心重复</li>
<li>缺点：将元素和任何子元素与 JSX 结构的其余部分分开。难阅读</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Component</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> myElement = <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>My Element<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;myElement&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Solid-中的-Refs"><a href="#Solid-中的-Refs" class="headerlink" title="Solid 中的 Refs"></a>Solid 中的 Refs</h3><ul>
<li>可以直接在 JSX 模板中访问 DOM 元素，从而保持元素的结构不变</li>
<li>先赋值后再添加DOM<ul>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Component</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> myElement;<span class="comment">//  先定义一个变量（赋值发生在将元素添加到 DOM 之前的创建时）</span></span><br><span class="line">  <span class="comment">// TS声明定义：let myElement!: HTMLDivElement;</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">ref</span>=<span class="string">&#123;myElement&#125;</span>&gt;</span>My Element<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>如果在将元素添加到 DOM 之前需要访问该元素，则可以使用以下回调形式：<ul>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;p ref=&#123;<span class="function">(<span class="params">el</span>) =&gt;</span> &#123;</span><br><span class="line">  myElement = el <span class="comment">// el已经创建但不能添加到DOM</span></span><br><span class="line">  &#125;&#125;&gt;</span><br><span class="line">  <span class="title class_">My</span> <span class="title class_">Element</span></span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="信号也可以用作-refs"><a href="#信号也可以用作-refs" class="headerlink" title="信号也可以用作 refs"></a>信号也可以用作 refs</h3><ul>
<li>直接访问元素时有用，但在组件首次呈现时该元素可能不存在，或者可能在某个时候从 DOM 中删除。</li>
<li>可以嵌套在条件判断中，条件添加成立才显示</li>
</ul>
<h3 id="转发refs"><a href="#转发refs" class="headerlink" title="转发refs"></a>转发refs</h3><ul>
<li>作用：允许将 ref 从父组件传递到子组件的技术</li>
<li>过程：将 ref 传递给子组件，然后将 ref 分配给子组件的元素，子组件获取props拿到该值</li>
<li>类似于react中的组件传递值</li>
</ul>
<h3 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h3><ul>
<li>作用：允许将可重用的行为附加到 DOM 元素</li>
<li>功能：<ul>
<li>在一个元素上有多个指令</li>
<li>将响应式数据传递给回调</li>
</ul>
</li>
<li>本质：具有特定签名的函数：<code>function directive(element: Element, accessor: () =&gt; any): void</code><ul>
<li><span class="en">element</span>: 应用指令的DOM元素</li>
<li><span class="en">accessor</span>：一个函数，用于访问传递给指令的值</li>
</ul>
</li>
<li>指令函数在渲染时调用，但在将元素添加到DOM之前调用</li>
<li>用途： <ul>
<li>创建信号</li>
<li>启动Effect</li>
<li>添加事件侦听器等</li>
</ul>
</li>
</ul>
<h2 id="细粒度反应性"><a href="#细粒度反应性" class="headerlink" title="细粒度反应性"></a>细粒度反应性</h2><ul>
<li>反应性确保对数据更改的自动响应，无需手动更新用户界面 （UI）。 通过将 UI 元素连接到基础数据，更新变得自动化。 在细粒度的反应式系统中，应用程序现在将能够进行高度针对性和特定的更新。</li>
<li>Solid vs React<ul>
<li>在 Solid 中，对需要更改的目标属性进行更新，从而避免更广泛的更新，有时甚至是不必要的更新。 </li>
<li>React 会重新执行整个组件来更改单个 attribute，这可能效率较低。</li>
</ul>
</li>
</ul>
<h3 id="构建反应式系统"><a href="#构建反应式系统" class="headerlink" title="构建反应式系统"></a>构建反应式系统</h3><ul>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createSignal</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createEffect</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [count, setCount] = <span class="title function_">createSignal</span>(<span class="number">0</span>);</span><br><span class="line"><span class="comment">// 按照观察者模式：signals 将维护订阅者effect的</span></span><br><span class="line"><span class="title function_">createEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;The count is &quot;</span> + <span class="title function_">count</span>());</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="响应式原语"><a href="#响应式原语" class="headerlink" title="响应式原语"></a>响应式原语</h3><ul>
<li>在Solid的响应性系统中，有两个关键元素：信号和观察者。</li>
<li>响应式功能的基础，也是核心元素：<ul>
<li><span class="en">Stores</span>：这些代理在后台创建、读取和写入信号</li>
<li><span class="en">Memo</span>：类似于Effects，但区别在于它们返回信号并通过缓存优化计算。它们根据效果的行为进行更新，但更适合计算优化。</li>
<li><span class="en">resources</span>：基于 memo 的概念，将网络请求的异步性转换为同步性，其中结果嵌入到 signal 中。</li>
<li>渲染效果是一种立即启动的定制效果，专为管理渲染过程而设计。</li>
</ul>
</li>
</ul>
<h3 id="制作系统反应式"><a href="#制作系统反应式" class="headerlink" title="制作系统反应式"></a>制作系统反应式</h3><ul>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> currentSubscriber = <span class="literal">null</span> <span class="comment">// 初始化订阅</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createSignal</span>(<span class="params">initValue</span>) &#123; <span class="comment">// 创建信号</span></span><br><span class="line">  <span class="keyword">let</span> value = initValue</span><br><span class="line">  <span class="keyword">const</span> subscribers = <span class="keyword">new</span> <span class="title class_">Set</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">getter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(currentSubscriber) &#123; <span class="comment">// 添加订阅者</span></span><br><span class="line">      subscribers.<span class="title function_">add</span>(currentSubscriber)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">setter</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(value === initValue) <span class="keyword">return</span> <span class="comment">// 相同不处理</span></span><br><span class="line">    value = newValue  <span class="comment">// 更新变量</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">const</span> subscribers <span class="keyword">of</span> subscribes) &#123; <span class="comment">// 通知所有订阅者</span></span><br><span class="line">      <span class="title function_">subscriber</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span>  [getter, setter]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createEffect</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> preSubscriber = currentSubscriber</span><br><span class="line">  currentSubscriber = fn</span><br><span class="line">  <span class="title function_">fn</span>() <span class="comment">// 注册signals</span></span><br><span class="line">  currentSubscriber = preSubscriber <span class="comment">// 一旦函数运行，重置订阅者</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="验证反应式系统"><a href="#验证反应式系统" class="headerlink" title="验证反应式系统"></a>验证反应式系统</h3><ul>
<li>可以使用定时器验证每隔n秒是否有响应更改</li>
</ul>
<h3 id="管理反应式系统中的生命周期"><a href="#管理反应式系统中的生命周期" class="headerlink" title="管理反应式系统中的生命周期"></a>管理反应式系统中的生命周期</h3><ul>
<li>在反应式系统中，各种元素（同称为节点）是相互关联的。</li>
<li>这些节点可以是signal、effect或其他反应式基元。</li>
<li>它们充当共同构成系统反应行为的各个单元。</li>
</ul>
<h4 id="效果跟踪的同步性质"><a href="#效果跟踪的同步性质" class="headerlink" title="效果跟踪的同步性质"></a>效果跟踪的同步性质</h4><ul>
<li>系统注册订阅者，运行effect函数，然后取消注册订阅者。所有的这些都是以线性、同步的顺序进行</li>
<li>在createEffect中创建setTimeout。由于系统式同步的，因此它不会等待完成。在setTimeout中触发getter式，全局范围不在具有已注册的订阅者。跟踪会出现问题</li>
</ul>
<h4 id="处理异步效果"><a href="#处理异步效果" class="headerlink" title="处理异步效果"></a>处理异步效果</h4><ul>
<li>虽然基本的响应式系统式同步的。但是像Solid这样的框架提供了处理异步的功能。</li>
<li><span class="en">on</span>：提供了手动指定效果的依赖关系方法</li>
<li><span class="en">resource</span>: 将网络请求的异步性转换为同步性，并将结果嵌入信号中</li>
</ul>
<h2 id="Router"><a href="#Router" class="headerlink" title="Router"></a>Router</h2><h3 id="基础使用"><a href="#基础使用" class="headerlink" title="基础使用"></a>基础使用</h3><ul>
<li>安装：<span class="en">npm install @solidjs&#x2F;router</span></li>
<li><span class="en1">基础设置</span>：组件将匹配URL以显示所需的页面<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="function">() =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Router</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;root&quot;</span>))</span><br></pre></td></tr></table></figure></li>
<li><span class="en1">提供根级布局</span>:不会在页面更改时更新，是顶级导航和上下文提供程序的理想位置<ul>
<li>把 router 的 根节点挂载在App上<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; render &#125; <span class="keyword">from</span> <span class="string">&quot;solid-js/web&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Router</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@solidjs/router&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;props.children&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">render</span>(<span class="function">() =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Router</span> <span class="attr">root</span>=<span class="string">&#123;App&#125;</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;root&quot;</span>))</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><span class="en1">添加路由</span>: 在Router嵌入Route，Route可以指定一个path和一个组件</li>
<li><span class="en1">catchall路由</span>：用于路由器找不到的页面，如404页面。<ul>
<li>使用方式：<span class="en1">*参数名</span>，参数名为可选</li>
</ul>
</li>
<li><span class="en1">创建指向路由的链接</span><ul>
<li>途径1：可以使用原生锚点标签（<code>&lt;a&gt;</code>）</li>
<li>途径2：使用<span class="en"><code>&lt;A&gt;组件</code></span>：提供路由的导航，可以使用CSS、inactiveClass和activeClass属性<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; render &#125; <span class="keyword">from</span> <span class="string">&quot;solid-js/web&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Router</span>, <span class="title class_">Route</span>, A &#125; <span class="keyword">from</span> <span class="string">&quot;@solidjs/router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&quot;./pages/Home&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Users</span> <span class="keyword">from</span> <span class="string">&quot;./pages/Users&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">NotFound</span> <span class="keyword">from</span> <span class="string">&quot;./pages/NotFound&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params">props</span>) =&gt; (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;/* 创建指向路由的链接: href指向path一样的路由 */&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">A</span> <span class="attr">href</span>=<span class="string">&quot;/&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">A</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">A</span> <span class="attr">href</span>=<span class="string">&quot;/users&quot;</span>&gt;</span>Users<span class="tag">&lt;/<span class="name">A</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Site Title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;props.children&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="title function_">render</span>(</span><br><span class="line">  <span class="function">() =&gt;</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Router</span> <span class="attr">root</span>=<span class="string">&#123;App&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     &#123;/*  添加路由 */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Home&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/users&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Users&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/*  catchall路由示例，NotFound为遇到404是显示的页面组件 */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;*paramName&quot;</span> <span class="attr">component</span>=<span class="string">&#123;NotFound&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Router</span>&gt;</span></span></span><br><span class="line">  ),</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;root&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="延迟加载路由组件"><a href="#延迟加载路由组件" class="headerlink" title="延迟加载路由组件"></a>延迟加载路由组件</h3><ul>
<li><span class="en">lazy函数</span>：推迟组件的加载，直到导航到该组件为止</li>
<li>示例：组件引入时使用<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; lazy &#125; <span class="keyword">from</span> <span class="string">&quot;solid-js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Users</span> = <span class="title function_">lazy</span>(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;./pages/Users&quot;</span>));</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Home</span> = <span class="title function_">lazy</span>(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;./pages/Home&quot;</span>));</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h3><ul>
<li>使用<span class="en">冒号:</span>,后面可以是任意字符串，只要url符合该模式，组件都会显示</li>
<li><span class="desc">示例：<code>&lt;Route path=&quot;/users/:id&quot; component=&#123;User&#125; /&gt;</code></span></li>
<li>关于动画&#x2F;过渡的注意事项：共享相同路径的路由将被视为同一路由。<ul>
<li>如果想强制重新渲染，可以将组件包装在一个带键的<code>&lt;Show&gt;</code>:</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Show</span> when=&#123;params.<span class="property">something</span>&#125; keyed&gt;</span><br><span class="line">    &lt;<span class="title class_">MyComponent</span>&gt;</span><br><span class="line">&lt;/<span class="title class_">Show</span>&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="访问参数-useParams"><a href="#访问参数-useParams" class="headerlink" title="访问参数 useParams()"></a>访问参数 useParams()</h4><ul>
<li>含义：使用useParams访问后，可以在组件中使用它们</li>
<li>useParams对于createResource和createSignal，可以基于路由参数创建动态行为</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createResource &#125; <span class="keyword">from</span> <span class="string">&quot;solid-js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useParams &#125; <span class="keyword">from</span> <span class="string">&quot;@solidjs/router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchUser</span>(<span class="params">id</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(</span><br><span class="line">    <span class="string">`https://jsonplaceholder.typicode.com/users/<span class="subst">$&#123;id&#125;</span>`</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">User</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> params = <span class="title function_">useParams</span>();</span><br><span class="line">  <span class="keyword">const</span> [data] = <span class="title function_">createResource</span>(<span class="function">() =&gt;</span> params.<span class="property">id</span>, fetchUser); <span class="comment">// 通过参数去创建resource</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Show</span> <span class="attr">when</span>=<span class="string">&#123;!data.loading&#125;</span> <span class="attr">fallback</span>=<span class="string">&#123;</span>&lt;<span class="attr">p</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">p</span>&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>Name: &#123;data().name&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>Email: &#123;data().email&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>Phone: &#123;data().phone&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Show</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="验证路由-matchFilters"><a href="#验证路由-matchFilters" class="headerlink" title="验证路由 matchFilters"></a>验证路由 matchFilters</h4><ul>
<li>含义：传递一个每个参数对应的验证规则的对象</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">filters</span>: <span class="title class_">MatchFilters</span> = &#123; <span class="comment">// 任何一个不符合都不匹配</span></span><br><span class="line">  <span class="attr">parent</span>: [<span class="string">&quot;mom&quot;</span>, <span class="string">&quot;dad&quot;</span>], <span class="comment">// 只允许是这两个字符串</span></span><br><span class="line">  <span class="attr">id</span>: <span class="regexp">/^\d+$/</span>, <span class="comment">// 只允许数字</span></span><br><span class="line">  <span class="attr">withHtmlExtension</span>: <span class="function">(<span class="params">v: string</span>) =&gt;</span> v.<span class="property">length</span> &gt; <span class="number">5</span> &amp;&amp; v.<span class="title function_">endsWith</span>(<span class="string">&quot;.html&quot;</span>), <span class="comment">// 只允许v的长度大于5，且后缀为.html</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">render</span>(<span class="function">() =&gt;</span> (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Router</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Route</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">path</span>=<span class="string">&quot;/users/:parent/:id/:withHtmlExtension&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">component</span>=<span class="string">&#123;User&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">matchFilters</span>=<span class="string">&#123;filters&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Router</span>&gt;</span></span></span><br><span class="line">), <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="可选参数"><a href="#可选参数" class="headerlink" title="可选参数 ?"></a>可选参数 ?</h4><ul>
<li>在参数名称的<span class="en">末尾添加?</span>，将指定参数设置为可选参数</li>
<li><span class="desc">示例: <code>&lt;Route path=&quot;/stories/:id?&quot; component=&#123;Stories&#125; /&gt;</code> id可有可无都不影响</span></li>
</ul>
<h4 id="通配符路由"><a href="#通配符路由" class="headerlink" title="通配符路由 *"></a>通配符路由 *</h4><ul>
<li>*必须是<span class="en1">路径的最后一部分</span></li>
<li><span class="desc">示例：<code>&lt;Route path=&quot;foo/*&quot; component=&#123;Foo&#125; /&gt;</code></span></li>
<li>要将通配符部分作为参数公开给组件，可以将其命名：<ul>
<li><span class="en"><code>&lt;Route path=&quot;foo/*any&quot; component=&#123;Foo&#125; /&gt;</code></span></li>
</ul>
</li>
</ul>
<h4 id="多路径"><a href="#多路径" class="headerlink" title="多路径"></a>多路径</h4><ul>
<li>使用数组定义路径</li>
<li><span class="desc">示例：<code>&lt;Route path=&#123;[&quot;login&quot;, &quot;register&quot;]&#125; component=&#123;Login&#125; /&gt;</code></span></li>
</ul>
<h3 id="嵌套路由"><a href="#嵌套路由" class="headerlink" title="嵌套路由"></a>嵌套路由</h3><ul>
<li><span class="en">component 属性</span>可以直接传递同页面的函数组件，也可以直接使用箭头函数返回一个Dom</li>
<li>只有叶节点（最里面的组件）才会被赋予</li>
<li>路由可以无限嵌套</li>
<li>示例： 两个指向同一个URL并渲染同一组件<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Route</span> path=<span class="string">&quot;/users&quot;</span> component=&#123;<span class="title class_">Users</span>&#125; /&gt; <span class="comment">// 让 parent 成为自己的路由，你必须单独指定它</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/users/:id&quot;</span> <span class="attr">component</span>=<span class="string">&#123;User&#125;</span> /&gt;</span></span></span><br><span class="line"></span><br><span class="line">&#123;<span class="comment">/* 嵌套组件 */</span>&#125;</span><br><span class="line">&lt;<span class="title class_">Route</span> path=<span class="string">&quot;/users&quot;</span>&gt; <span class="comment">// 可以在这里添加一个component=&#123;函数组件&#125;，该组件中&lt;A&gt;指向/，还使用props.children ,返回的节点应该是声明props.children的父节点，而不是下面单独指定的父节点</span></span><br><span class="line">  &#123;<span class="comment">/* 必须单独指定父节点，才会成为自己的路由 */</span>&#125;</span><br><span class="line">  &lt;<span class="title class_">Route</span> path=<span class="string">&quot;/&quot;</span> component=&#123;<span class="title class_">Users</span>&#125; /&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/:id&quot;</span> <span class="attr">component</span>=<span class="string">&#123;User&#125;</span> /&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Route</span>&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="预加载函数-preload"><a href="#预加载函数-preload" class="headerlink" title="预加载函数 preload"></a>预加载函数 preload</h3><ul>
<li>使用 preload 函数，数据获取与加载 route 并行启动</li>
<li>preload 函数通过在 Route 加载后调用或者在链接悬停时急切地调用</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">preloadUser</span>(<span class="params">&#123; params, location &#125;</span>) &#123;&#125; <span class="comment">// 该函数传递用于访问路由信息的对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义并传递preload</span></span><br><span class="line">&lt;<span class="title class_">Route</span> path=<span class="string">&quot;/users/:id&quot;</span> component=&#123;<span class="title class_">User</span>&#125; preload=&#123;preloadUser&#125; /&gt;</span><br></pre></td></tr></table></figure></li>
<li>可以从专用文件或文件中导出与路由相对应的预加载函数和数据包装器。此模式提供了一种无需加载其他任何内容即可导入 data 函数的方法</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/pages/users/[id].data.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; query &#125; <span class="keyword">from</span> <span class="string">&quot;@solidjs/router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getUser = <span class="title function_">query</span>(<span class="title function_">async</span> (id) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`https://swapi.tech/api/people/<span class="subst">$&#123;id&#125;</span>/`</span>)).<span class="title function_">json</span>();</span><br><span class="line">&#125;, <span class="string">&quot;getUser&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">preloadUser</span>(<span class="params">&#123; params, location, intent &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">getUser</span>(params.<span class="property">id</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用时直接导入</span></span><br><span class="line"><span class="keyword">import</span> &#123; preloadUser &#125; <span class="keyword">from</span> <span class="string">&quot;./pages/users/[id].data.js&quot;</span>;</span><br></pre></td></tr></table></figure></li>
<li>在除 preload 之外的任何时间调用时，preload 函数的值都会传递给页面组件。可以初始化页面或使用createAsync</li>
<li>注意：<span class="key">要防止多次提取或触发重新提取，使用query</span></li>
</ul>
<h2 id="数据获取-createResource"><a href="#数据获取-createResource" class="headerlink" title="数据获取 createResource"></a>数据获取 createResource</h2><ul>
<li>专为管理异步数据获取而设计的专用信号。</li>
<li>它包装了异步操作，提供了一种处理各种状态的方法：<span class="en">loading、success 和 error。</span></li>
<li>此功能是非阻塞的，这意味着即使在检索信息期间，也可以保证应用程序保持响应。</li>
</ul>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><ul>
<li>createResource需要一个返回 Promise 作为其参数的函数。在调用时返回一个信号，该信号具有反应性属性：<ul>
<li><span class="en">state</span>：当前状态(unresolved、pending、ready、refreshing 或 errored)</li>
<li><span class="en">loading</span>：当前任务是否正在进行，boolean类型</li>
<li><span class="en">error</span>：错误的信息。</li>
<li><span class="en">latest</span>：返回最新数据或结果。</li>
</ul>
</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">fetchUser</span> = <span class="keyword">async</span> (<span class="params">id</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`https://swapi.dev/api/people/<span class="subst">$&#123;id&#125;</span>/`</span>);</span><br><span class="line">  <span class="keyword">return</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> [user] = <span class="title function_">createResource</span>(userId, fetchUser);</span><br><span class="line"><span class="comment">// 使用 user.loading ...</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="调用多个异步事件-Suspense"><a href="#调用多个异步事件-Suspense" class="headerlink" title="调用多个异步事件 Suspense"></a>调用多个异步事件 Suspense</h3><ul>
<li><span class="en1">同步多个异步事件的显示。</span>允许等待所有异步事件解析时回退占位符，防止显示部分加载内容</li>
<li>直接在使用异步语句的最外层添加</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Suspense</span> fallback=&#123;<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&#125;&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Switch</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Match</span> <span class="attr">when</span>=<span class="string">&#123;user.error&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>Error: &#123;user.error.message&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Match</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Match</span> <span class="attr">when</span>=<span class="string">&#123;user()&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;JSON.stringify(user())&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Match</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Switch</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Suspense</span>&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="动态数据处理"><a href="#动态数据处理" class="headerlink" title="动态数据处理"></a>动态数据处理</h3><h4 id="mutate"><a href="#mutate" class="headerlink" title="mutate"></a>mutate</h4><ul>
<li>在即时反馈或响应很重要的情况下，该方法提供“乐观突变”。</li>
<li>此功能在任务列表等应用程序中特别有价值。</li>
<li><span class="desc">例如: 当用户输入新任务并单击按钮时，无论与服务器正在进行的数据通信如何，列表都将立即刷新。</span></li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">For</span>, createResource &#125; <span class="keyword">from</span> <span class="string">&quot;solid-js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">TodoList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [tasks, &#123; mutate &#125;] = <span class="title function_">createResource</span>(fetchTasksFromServer);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">For</span> <span class="attr">each</span>=<span class="string">&#123;tasks()&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;(task) =&gt; (</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;task.name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          )&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">For</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          mutate((todos) =&gt; [...todos, &quot;do new task&quot;]); // add todo for user</span></span><br><span class="line"><span class="language-xml">          // make a call to send to database</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      &gt;</span></span><br><span class="line"><span class="language-xml">        Add Task</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="refetch"><a href="#refetch" class="headerlink" title="refetch"></a>refetch</h4><ul>
<li>当需要实时反馈时，该方法可用于重新加载当前查询，而不管任何更改。</li>
<li>示例：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createResource, onCleanup &#125; <span class="keyword">from</span> <span class="string">&quot;solid-js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">StockPriceTicker</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [prices, &#123; refetch &#125;] = <span class="title function_">createResource</span>(fetchStockPrices);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">refetch</span>()</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">  <span class="title function_">onCleanup</span>(<span class="function">() =&gt;</span> <span class="built_in">clearInterval</span>(timer))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>

</article>
    
    

</div>
<div class="trm-post-next-prev row">
    <div class="col-lg-12">
        <!-- title -->
        <h5 class="trm-title-with-divider">
            Other Articles
            <span data-number="02"></span>
        </h5>
    </div>
    
        <div class="col-lg-6">
    <div class="trm-older-publications-card trm-scroll-animation trm-active-el">
        <div class="trm-older-publication">
            
            <a class="trm-op-top trm-anima-link" href="/2025/03/19/JS/%E7%BB%A7%E6%89%BF%E6%8A%80%E6%9C%AF/">
                <span class="trm-op-cover">
                    <img alt="cover" class="no-fancybox" src="/img/cover/cover-1.jpg">
                </span>
                <h6 class="trm-op-title">7种强大的JavaScript继承技术</h6>
            </a>
            <div class="trm-divider trm-mb-15 trm-mt-20"></div>
            <ul class="trm-card-data trm-label">
                <li>25/03/19</li>
                <li>10:56</li>
                <li>JavaScript</li>
            </ul>
        </div>
    </div>
</div>
    
    
        <div class="col-lg-6">
    <div class="trm-older-publications-card trm-scroll-animation trm-active-el">
        <div class="trm-older-publication">
            
            <a class="trm-op-top trm-anima-link" href="/2025/03/10/%E5%8F%AF%E8%A7%86%E5%8C%96/SVG%E5%9F%BA%E7%A1%80/">
                <span class="trm-op-cover">
                    <img alt="cover" class="no-fancybox" src="/img/cover/cover-1.jpg">
                </span>
                <h6 class="trm-op-title">SVG基础</h6>
            </a>
            <div class="trm-divider trm-mb-15 trm-mt-20"></div>
            <ul class="trm-card-data trm-label">
                <li>25/03/10</li>
                <li>12:01</li>
                <li>可视化</li>
            </ul>
        </div>
    </div>
</div>
    
</div>

    



                    <div class="trm-divider footer-divider"></div>

                    <!-- footer -->
                    <footer class="trm-footer-card trm-scroll-animation">

    

    
        <div class="trm-footer-item">
            <span>© 2024.10.30 - 2025</span>
            <span class="footer-separator"data-separator=" · "></span>
            <span class="trm-accent-color">UUOVO</span>
        </div>
    

    
        <div class="trm-footer-item">
            <span>
                Powered by <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> v7.3.0
            </span>
            <span class="footer-separator" data-separator=" | "></span>
            <span> 
                Theme - 
                <a rel="noopener" href='https://github.com/MaLuns/hexo-theme-async' target='_blank'>Async</a>
                v2.2.3
            </span>
        </div>
      

    
        <div class="trm-footer-item blog-run-long"></div>
     

     
</footer>
                    <!-- footer end -->

                </div>
            </div>
        </div>
    </div>
</div>
            <!-- body end -->

            

    <div id="post-toc" class="trm-post-toc">
      <div class="trm-post-toc-header">
        Article table of contents
				<span id="post-toc-top">
					TOP
				</span>
      </div>
      <div class="trm-post-toc-content">
        <ol class="trm-toc"><li class="trm-toc-item trm-toc-level-2" title="什么是 Solid？"><a rel="nofollow" class="trm-toc-link" href="#什么是-Solid？"><span class="trm-toc-number">1.</span> <span class="trm-toc-text">什么是 Solid？</span></a></li><li class="trm-toc-item trm-toc-level-2" title="创建 Solid 应用程序"><a rel="nofollow" class="trm-toc-link" href="#创建-Solid-应用程序"><span class="trm-toc-number">2.</span> <span class="trm-toc-text">创建 Solid 应用程序</span></a></li><li class="trm-toc-item trm-toc-level-2" title="反应性"><a rel="nofollow" class="trm-toc-link" href="#反应性"><span class="trm-toc-number">3.</span> <span class="trm-toc-text">反应性</span></a></li><li class="trm-toc-item trm-toc-level-2" title="反应原理"><a rel="nofollow" class="trm-toc-link" href="#反应原理"><span class="trm-toc-number">4.</span> <span class="trm-toc-text">反应原理</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="信号 Signals"><a rel="nofollow" class="trm-toc-link" href="#信号-Signals"><span class="trm-toc-number">4.1.</span> <span class="trm-toc-text">信号 Signals</span></a></li><li class="trm-toc-item trm-toc-level-3" title="订阅者 Subscribers"><a rel="nofollow" class="trm-toc-link" href="#订阅者-Subscribers"><span class="trm-toc-number">4.2.</span> <span class="trm-toc-text">订阅者 Subscribers</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="状态管理"><a rel="nofollow" class="trm-toc-link" href="#状态管理"><span class="trm-toc-number">5.</span> <span class="trm-toc-text">状态管理</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="管理基本状态"><a rel="nofollow" class="trm-toc-link" href="#管理基本状态"><span class="trm-toc-number">5.1.</span> <span class="trm-toc-text">管理基本状态</span></a></li><li class="trm-toc-item trm-toc-level-3" title="跟踪更改"><a rel="nofollow" class="trm-toc-link" href="#跟踪更改"><span class="trm-toc-number">5.2.</span> <span class="trm-toc-text">跟踪更改</span></a></li><li class="trm-toc-item trm-toc-level-3" title="在UI中呈现状态"><a rel="nofollow" class="trm-toc-link" href="#在UI中呈现状态"><span class="trm-toc-number">5.3.</span> <span class="trm-toc-text">在UI中呈现状态</span></a></li><li class="trm-toc-item trm-toc-level-3" title="派生信号"><a rel="nofollow" class="trm-toc-link" href="#派生信号"><span class="trm-toc-number">5.4.</span> <span class="trm-toc-text">派生信号</span></a></li><li class="trm-toc-item trm-toc-level-3" title="提升状态"><a rel="nofollow" class="trm-toc-link" href="#提升状态"><span class="trm-toc-number">5.5.</span> <span class="trm-toc-text">提升状态</span></a></li><li class="trm-toc-item trm-toc-level-3" title="管理复杂状态"><a rel="nofollow" class="trm-toc-link" href="#管理复杂状态"><span class="trm-toc-number">5.6.</span> <span class="trm-toc-text">管理复杂状态</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="同步 vs 异步"><a rel="nofollow" class="trm-toc-link" href="#同步-vs-异步"><span class="trm-toc-number">6.</span> <span class="trm-toc-text">同步 vs 异步</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="同步反应性"><a rel="nofollow" class="trm-toc-link" href="#同步反应性"><span class="trm-toc-number">6.1.</span> <span class="trm-toc-text">同步反应性</span></a></li><li class="trm-toc-item trm-toc-level-3" title="异步反应性"><a rel="nofollow" class="trm-toc-link" href="#异步反应性"><span class="trm-toc-number">6.2.</span> <span class="trm-toc-text">异步反应性</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="关键概念（简单总结）"><a rel="nofollow" class="trm-toc-link" href="#关键概念（简单总结）"><span class="trm-toc-number">7.</span> <span class="trm-toc-text">关键概念（简单总结）</span></a></li><li class="trm-toc-item trm-toc-level-2" title="组件"><a rel="nofollow" class="trm-toc-link" href="#组件"><span class="trm-toc-number">8.</span> <span class="trm-toc-text">组件</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="classList"><a rel="nofollow" class="trm-toc-link" href="#classList"><span class="trm-toc-number">8.1.</span> <span class="trm-toc-text">classList</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="事件处理程序"><a rel="nofollow" class="trm-toc-link" href="#事件处理程序"><span class="trm-toc-number">9.</span> <span class="trm-toc-text">事件处理程序</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="绑定事件"><a rel="nofollow" class="trm-toc-link" href="#绑定事件"><span class="trm-toc-number">9.1.</span> <span class="trm-toc-text">绑定事件</span></a></li><li class="trm-toc-item trm-toc-level-3" title="动态处理程序"><a rel="nofollow" class="trm-toc-link" href="#动态处理程序"><span class="trm-toc-number">9.2.</span> <span class="trm-toc-text">动态处理程序</span></a></li><li class="trm-toc-item trm-toc-level-3" title="活动委托"><a rel="nofollow" class="trm-toc-link" href="#活动委托"><span class="trm-toc-number">9.3.</span> <span class="trm-toc-text">活动委托</span></a></li><li class="trm-toc-item trm-toc-level-3" title="注意"><a rel="nofollow" class="trm-toc-link" href="#注意"><span class="trm-toc-number">9.4.</span> <span class="trm-toc-text">注意</span></a></li><li class="trm-toc-item trm-toc-level-3" title="委托事件列表"><a rel="nofollow" class="trm-toc-link" href="#委托事件列表"><span class="trm-toc-number">9.5.</span> <span class="trm-toc-text">委托事件列表</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="Props"><a rel="nofollow" class="trm-toc-link" href="#Props"><span class="trm-toc-number">10.</span> <span class="trm-toc-text">Props</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="mergeProps"><a rel="nofollow" class="trm-toc-link" href="#mergeProps"><span class="trm-toc-number">10.1.</span> <span class="trm-toc-text">mergeProps</span></a></li><li class="trm-toc-item trm-toc-level-3" title="解构 props"><a rel="nofollow" class="trm-toc-link" href="#解构-props"><span class="trm-toc-number">10.2.</span> <span class="trm-toc-text">解构 props</span></a></li><li class="trm-toc-item trm-toc-level-3" title="splitProps"><a rel="nofollow" class="trm-toc-link" href="#splitProps"><span class="trm-toc-number">10.3.</span> <span class="trm-toc-text">splitProps</span></a></li><li class="trm-toc-item trm-toc-level-3" title="将 props 传递给 children"><a rel="nofollow" class="trm-toc-link" href="#将-props-传递给-children"><span class="trm-toc-number">10.4.</span> <span class="trm-toc-text">将 props 传递给 children</span></a></li><li class="trm-toc-item trm-toc-level-3" title="螺旋桨钻孔 Prop Drilling"><a rel="nofollow" class="trm-toc-link" href="#螺旋桨钻孔-Prop-Drilling"><span class="trm-toc-number">10.5.</span> <span class="trm-toc-text">螺旋桨钻孔 Prop Drilling</span></a></li><li class="trm-toc-item trm-toc-level-3" title="避免多层级传递props"><a rel="nofollow" class="trm-toc-link" href="#避免多层级传递props"><span class="trm-toc-number">10.6.</span> <span class="trm-toc-text">避免多层级传递props</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="条件渲染 Show标签"><a rel="nofollow" class="trm-toc-link" href="#条件渲染-Show标签"><span class="trm-toc-number">11.</span> <span class="trm-toc-text">条件渲染 Show标签</span></a></li><li class="trm-toc-item trm-toc-level-2" title="Switch 标签和 Match 标签"><a rel="nofollow" class="trm-toc-link" href="#Switch-标签和-Match-标签"><span class="trm-toc-number">12.</span> <span class="trm-toc-text">Switch 标签和 Match 标签</span></a></li><li class="trm-toc-item trm-toc-level-2" title="Dynamic 标签"><a rel="nofollow" class="trm-toc-link" href="#Dynamic-标签"><span class="trm-toc-number">13.</span> <span class="trm-toc-text">Dynamic 标签</span></a></li><li class="trm-toc-item trm-toc-level-2" title="列表呈现"><a rel="nofollow" class="trm-toc-link" href="#列表呈现"><span class="trm-toc-number">14.</span> <span class="trm-toc-text">列表呈现</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="For 标签"><a rel="nofollow" class="trm-toc-link" href="#For-标签"><span class="trm-toc-number">14.1.</span> <span class="trm-toc-text">For 标签</span></a></li><li class="trm-toc-item trm-toc-level-3" title="Index 标签"><a rel="nofollow" class="trm-toc-link" href="#Index-标签"><span class="trm-toc-number">14.2.</span> <span class="trm-toc-text">Index 标签</span></a></li><li class="trm-toc-item trm-toc-level-3" title="Index 标签 vs For 标签"><a rel="nofollow" class="trm-toc-link" href="#Index-标签-vs-For-标签"><span class="trm-toc-number">14.3.</span> <span class="trm-toc-text">Index 标签 vs For 标签</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="Portal 标签"><a rel="nofollow" class="trm-toc-link" href="#Portal-标签"><span class="trm-toc-number">15.</span> <span class="trm-toc-text">Portal 标签</span></a></li><li class="trm-toc-item trm-toc-level-2" title="ErrorBoundary 标签"><a rel="nofollow" class="trm-toc-link" href="#ErrorBoundary-标签"><span class="trm-toc-number">16.</span> <span class="trm-toc-text">ErrorBoundary 标签</span></a></li><li class="trm-toc-item trm-toc-level-2" title="Effects"><a rel="nofollow" class="trm-toc-link" href="#Effects"><span class="trm-toc-number">17.</span> <span class="trm-toc-text">Effects</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="管理依赖项"><a rel="nofollow" class="trm-toc-link" href="#管理依赖项"><span class="trm-toc-number">17.1.</span> <span class="trm-toc-text">管理依赖项</span></a></li><li class="trm-toc-item trm-toc-level-3" title="订阅信号"><a rel="nofollow" class="trm-toc-link" href="#订阅信号"><span class="trm-toc-number">17.2.</span> <span class="trm-toc-text">订阅信号</span></a></li><li class="trm-toc-item trm-toc-level-3" title="嵌套效果"><a rel="nofollow" class="trm-toc-link" href="#嵌套效果"><span class="trm-toc-number">17.3.</span> <span class="trm-toc-text">嵌套效果</span></a></li><li class="trm-toc-item trm-toc-level-3" title="生命周期函数"><a rel="nofollow" class="trm-toc-link" href="#生命周期函数"><span class="trm-toc-number">17.4.</span> <span class="trm-toc-text">生命周期函数</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="memo"><a rel="nofollow" class="trm-toc-link" href="#memo"><span class="trm-toc-number">18.</span> <span class="trm-toc-text">memo</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="Memo vs Effect"><a rel="nofollow" class="trm-toc-link" href="#Memo-vs-Effect"><span class="trm-toc-number">18.1.</span> <span class="trm-toc-text">Memo vs Effect</span></a></li><li class="trm-toc-item trm-toc-level-3" title="实践"><a rel="nofollow" class="trm-toc-link" href="#实践"><span class="trm-toc-number">18.2.</span> <span class="trm-toc-text">实践</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="Context"><a rel="nofollow" class="trm-toc-link" href="#Context"><span class="trm-toc-number">19.</span> <span class="trm-toc-text">Context</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="何时使用？"><a rel="nofollow" class="trm-toc-link" href="#何时使用？"><span class="trm-toc-number">19.1.</span> <span class="trm-toc-text">何时使用？</span></a></li><li class="trm-toc-item trm-toc-level-3" title="创建和使用"><a rel="nofollow" class="trm-toc-link" href="#创建和使用"><span class="trm-toc-number">19.2.</span> <span class="trm-toc-text">创建和使用</span></a></li><li class="trm-toc-item trm-toc-level-3" title="自定义上下文实用程序"><a rel="nofollow" class="trm-toc-link" href="#自定义上下文实用程序"><span class="trm-toc-number">19.3.</span> <span class="trm-toc-text">自定义上下文实用程序</span></a></li><li class="trm-toc-item trm-toc-level-3" title="更新上下文"><a rel="nofollow" class="trm-toc-link" href="#更新上下文"><span class="trm-toc-number">19.4.</span> <span class="trm-toc-text">更新上下文</span></a></li><li class="trm-toc-item trm-toc-level-3" title="使用上下文进行调试"><a rel="nofollow" class="trm-toc-link" href="#使用上下文进行调试"><span class="trm-toc-number">19.5.</span> <span class="trm-toc-text">使用上下文进行调试</span></a></li><li class="trm-toc-item trm-toc-level-3" title="createContext 和 useContext 常见问题"><a rel="nofollow" class="trm-toc-link" href="#createContext-和-useContext-常见问题"><span class="trm-toc-number">19.6.</span> <span class="trm-toc-text">createContext 和 useContext 常见问题</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="仓库 Store"><a rel="nofollow" class="trm-toc-link" href="#仓库-Store"><span class="trm-toc-number">20.</span> <span class="trm-toc-text">仓库 Store</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="创建Store"><a rel="nofollow" class="trm-toc-link" href="#创建Store"><span class="trm-toc-number">20.1.</span> <span class="trm-toc-text">创建Store</span></a></li><li class="trm-toc-item trm-toc-level-3" title="访问Store"><a rel="nofollow" class="trm-toc-link" href="#访问Store"><span class="trm-toc-number">20.2.</span> <span class="trm-toc-text">访问Store</span></a></li><li class="trm-toc-item trm-toc-level-3" title="修改Store值"><a rel="nofollow" class="trm-toc-link" href="#修改Store值"><span class="trm-toc-number">20.3.</span> <span class="trm-toc-text">修改Store值</span></a></li><li class="trm-toc-item trm-toc-level-3" title="Path语法灵活性"><a rel="nofollow" class="trm-toc-link" href="#Path语法灵活性"><span class="trm-toc-number">20.4.</span> <span class="trm-toc-text">Path语法灵活性</span></a></li><li class="trm-toc-item trm-toc-level-3" title="修改数组中的值"><a rel="nofollow" class="trm-toc-link" href="#修改数组中的值"><span class="trm-toc-number">20.5.</span> <span class="trm-toc-text">修改数组中的值</span></a></li><li class="trm-toc-item trm-toc-level-3" title="修改对象"><a rel="nofollow" class="trm-toc-link" href="#修改对象"><span class="trm-toc-number">20.6.</span> <span class="trm-toc-text">修改对象</span></a></li><li class="trm-toc-item trm-toc-level-3" title="Store 的实体函数"><a rel="nofollow" class="trm-toc-link" href="#Store-的实体函数"><span class="trm-toc-number">20.7.</span> <span class="trm-toc-text">Store 的实体函数</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="Refs"><a rel="nofollow" class="trm-toc-link" href="#Refs"><span class="trm-toc-number">21.</span> <span class="trm-toc-text">Refs</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="访问DOM元素"><a rel="nofollow" class="trm-toc-link" href="#访问DOM元素"><span class="trm-toc-number">21.1.</span> <span class="trm-toc-text">访问DOM元素</span></a></li><li class="trm-toc-item trm-toc-level-3" title="JSX作为值"><a rel="nofollow" class="trm-toc-link" href="#JSX作为值"><span class="trm-toc-number">21.2.</span> <span class="trm-toc-text">JSX作为值</span></a></li><li class="trm-toc-item trm-toc-level-3" title="Solid 中的 Refs"><a rel="nofollow" class="trm-toc-link" href="#Solid-中的-Refs"><span class="trm-toc-number">21.3.</span> <span class="trm-toc-text">Solid 中的 Refs</span></a></li><li class="trm-toc-item trm-toc-level-3" title="信号也可以用作 refs"><a rel="nofollow" class="trm-toc-link" href="#信号也可以用作-refs"><span class="trm-toc-number">21.4.</span> <span class="trm-toc-text">信号也可以用作 refs</span></a></li><li class="trm-toc-item trm-toc-level-3" title="转发refs"><a rel="nofollow" class="trm-toc-link" href="#转发refs"><span class="trm-toc-number">21.5.</span> <span class="trm-toc-text">转发refs</span></a></li><li class="trm-toc-item trm-toc-level-3" title="指令"><a rel="nofollow" class="trm-toc-link" href="#指令"><span class="trm-toc-number">21.6.</span> <span class="trm-toc-text">指令</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="细粒度反应性"><a rel="nofollow" class="trm-toc-link" href="#细粒度反应性"><span class="trm-toc-number">22.</span> <span class="trm-toc-text">细粒度反应性</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="构建反应式系统"><a rel="nofollow" class="trm-toc-link" href="#构建反应式系统"><span class="trm-toc-number">22.1.</span> <span class="trm-toc-text">构建反应式系统</span></a></li><li class="trm-toc-item trm-toc-level-3" title="响应式原语"><a rel="nofollow" class="trm-toc-link" href="#响应式原语"><span class="trm-toc-number">22.2.</span> <span class="trm-toc-text">响应式原语</span></a></li><li class="trm-toc-item trm-toc-level-3" title="制作系统反应式"><a rel="nofollow" class="trm-toc-link" href="#制作系统反应式"><span class="trm-toc-number">22.3.</span> <span class="trm-toc-text">制作系统反应式</span></a></li><li class="trm-toc-item trm-toc-level-3" title="验证反应式系统"><a rel="nofollow" class="trm-toc-link" href="#验证反应式系统"><span class="trm-toc-number">22.4.</span> <span class="trm-toc-text">验证反应式系统</span></a></li><li class="trm-toc-item trm-toc-level-3" title="管理反应式系统中的生命周期"><a rel="nofollow" class="trm-toc-link" href="#管理反应式系统中的生命周期"><span class="trm-toc-number">22.5.</span> <span class="trm-toc-text">管理反应式系统中的生命周期</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="Router"><a rel="nofollow" class="trm-toc-link" href="#Router"><span class="trm-toc-number">23.</span> <span class="trm-toc-text">Router</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="基础使用"><a rel="nofollow" class="trm-toc-link" href="#基础使用"><span class="trm-toc-number">23.1.</span> <span class="trm-toc-text">基础使用</span></a></li><li class="trm-toc-item trm-toc-level-3" title="延迟加载路由组件"><a rel="nofollow" class="trm-toc-link" href="#延迟加载路由组件"><span class="trm-toc-number">23.2.</span> <span class="trm-toc-text">延迟加载路由组件</span></a></li><li class="trm-toc-item trm-toc-level-3" title="动态路由"><a rel="nofollow" class="trm-toc-link" href="#动态路由"><span class="trm-toc-number">23.3.</span> <span class="trm-toc-text">动态路由</span></a></li><li class="trm-toc-item trm-toc-level-3" title="嵌套路由"><a rel="nofollow" class="trm-toc-link" href="#嵌套路由"><span class="trm-toc-number">23.4.</span> <span class="trm-toc-text">嵌套路由</span></a></li><li class="trm-toc-item trm-toc-level-3" title="预加载函数 preload"><a rel="nofollow" class="trm-toc-link" href="#预加载函数-preload"><span class="trm-toc-number">23.5.</span> <span class="trm-toc-text">预加载函数 preload</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="数据获取 createResource"><a rel="nofollow" class="trm-toc-link" href="#数据获取-createResource"><span class="trm-toc-number">24.</span> <span class="trm-toc-text">数据获取 createResource</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="使用"><a rel="nofollow" class="trm-toc-link" href="#使用"><span class="trm-toc-number">24.1.</span> <span class="trm-toc-text">使用</span></a></li><li class="trm-toc-item trm-toc-level-3" title="调用多个异步事件 Suspense"><a rel="nofollow" class="trm-toc-link" href="#调用多个异步事件-Suspense"><span class="trm-toc-number">24.2.</span> <span class="trm-toc-text">调用多个异步事件 Suspense</span></a></li><li class="trm-toc-item trm-toc-level-3" title="动态数据处理"><a rel="nofollow" class="trm-toc-link" href="#动态数据处理"><span class="trm-toc-number">24.3.</span> <span class="trm-toc-text">动态数据处理</span></a></li></ol></li></ol>
      </div>
    </div>

            
<div class="trm-fixed-container">
    
        <div class="trm-fixed-btn post-toc-btn" data-title="Open toc">
            <i class="iconfont fas fa-th-list"></i>
        </div>
    
    
        <div class="trm-fixed-btn" data-title="Read Mode" onclick="asyncFun.switchReadMode()">
            <i class="iconfont fas fa-book-reader"></i>
        </div>
    
    
        <div class="trm-fixed-btn hidden-md" data-title="Toggle between single-column and double-column" onclick="asyncFun.switchSingleColumn()">
            <i class="iconfont fas fa-arrows-alt-h"></i>
        </div>
    
    <div id="trm-back-top" class="trm-fixed-btn" data-title="Back To Top">
        <i class="iconfont fas fa-arrow-up"></i>
    </div>
</div>
        </div>
      </div>
      <!-- scroll container end -->
  </div>
  <!-- app wrapper end -->

  
    <div class="trm-search-popup">
        <div class="trm-search-wrapper">
            <div class="form trm-search-form">
                <div class="trm-search-input-icon">
                    <i class="iconfont fas fa-search"></i>
                </div>
                <input class="trm-search-input" type="text" placeholder="Searching...">
                <div class="trm-search-btn-close">
                    <i class="iconfont fas fa-times"></i>
                </div>
            </div>
            <div class="trm-search-result-container">
                <div class="trm-search-empty">
                    Please enter keywords to search
                </div>
            </div>
            <div class="trm-search-footer">
                <div class="trm-search-stats"></div>
                <ul class="trm-search-commands">
                    <li>
                        <kbd class="command-palette-commands-key">
                            <svg width="15" height="15" aria-label="Escape key" role="img">
                                <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-width="1.2">
                                    <path
                                        d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956">
                                    </path>
                                </g>
                            </svg>
                        </kbd>
                        <span class="command-palette-Label">to close</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>

  <!-- Plugin -->




    
    
<script src="https://unpkg.com/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script>

    
<script src="https://unpkg.com/swiper@4.5.1/dist/js/swiper.min.js"></script>


    
        <script src="/js/plugins/typing.js?v=2.2.3"></script>
    

    
        
<script src="https://unpkg.com/hexo-generator-searchdb@1.4.0/dist/search.js"></script>

        <script src="/js/plugins/local_search.js?v=2.2.3"></script>
    

    <!-- 数学公式 -->
    

    <!-- 评论插件 -->
    
        

        
    

		
			<script src="/js/plugins/danmu.js?v=2.2.3"></script>
		




    <!-- Service Worker -->
    
    <!-- baidu push -->
    


<script id="async-script" src="/js/main.js?v=2.2.3"></script>

<!-- CDN -->


    

    

    



</body>

</html>